<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Cyber Operations — EVRT</title>
  <meta name="description" content="Red/Blue/Purple teaming, SecOps automation, cloud & app security. Cinematic live demo with terminal and breach simulator."/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300..900&family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="assets/style.css"/>

  <style>
    /* ===== Cinematic Cyber Theme (scoped to this page) ===== */
    :root {
      --cy-neon: #6ee7ff;
      --cy-accent: #63ffa5;
      --cy-danger: #ff4d6d;
      --cy-amber: #ffd75a;
      --cy-bg: #0a0e14;
      --cy-card: #0f141c;
      --cy-grid: rgba(255,255,255,.06);
      --cy-mute: #8fa2b7;
    }
    body{ background: radial-gradient(1200px 800px at 80% -200px,#142034 0,#0a0e14 65%); }

    /* background layers */
    .cy-layers { position: fixed; inset: 0; pointer-events: none; z-index: 0; }
    .cy-scanlines {
      position:absolute; inset:0; background:
        linear-gradient(to bottom, rgba(255,255,255,.03) 1px, transparent 1px) 0 0/100% 3px;
      opacity:.25; mix-blend-mode: overlay;
    }
    #cy-matrix { position:absolute; inset:0; opacity:.26; }

    .eyebrow { letter-spacing:.12em; text-transform:uppercase; color:var(--cy-mute); }
    .hero h1 { font-size: clamp(40px, 6vw, 72px); line-height:1.02; margin:.2rem 0 1rem; }
    .hero .stats { display:grid; grid-template-columns:repeat(3,1fr); gap:14px; margin-top:14px; }
    .hero .stat { background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.02));
      border:1px solid var(--cy-grid); border-radius:14px; padding:12px; }
    .big { font-size:28px; font-weight:800; letter-spacing:.02em; }

    .cy-section { position:relative; z-index:1; }

    /* Terminal */
    .terminal {
      background: #05080d;
      border: 1px solid rgba(110,231,255,.25);
      box-shadow: 0 0 40px rgba(110,231,255,.08) inset, 0 12px 40px rgba(0,0,0,.35);
      border-radius: 12px; overflow: hidden; color: #bfefff;
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    }
    .term-top { display:flex; align-items:center; gap:8px; padding:8px 12px; background: #07121b; border-bottom: 1px solid rgba(255,255,255,.06); }
    .dot{ width:10px; height:10px; border-radius:999px; }
    .dot.r{ background:#ff5f56; } .dot.y{ background:#ffbd2e; } .dot.g{ background:#27c93f; }
    .term-body { height: 280px; overflow: auto; padding: 12px; }
    .term-line { white-space: pre-wrap; }
    .term-caret { display:inline-block; width:9px; height:1.05em; background:#bfefff; vertical-align:-2px; animation: blink 1s steps(1) infinite; }
    @keyframes blink { 50% { opacity:0; } }
    .term-success { color:#63ffa5; }
    .term-warn { color:#ffd75a; }
    .term-err { color:#ff8299; }

    /* Threat ticker */
    .ticker { display:flex; align-items:center; gap:8px; border:1px solid var(--cy-grid); border-radius:12px; padding:8px 10px; background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02)); overflow: hidden; }
    .ticker-label { font-weight:700; color:var(--cy-amber); }
    .ticker-track { display:flex; gap:28px; white-space:nowrap; animation: ticker 22s linear infinite; }
    @keyframes ticker { from{ transform: translateX(0); } to{ transform: translateX(-50%); } }

    /* Capability cards */
    .grid-3 { display:grid; gap:16px; grid-template-columns:1fr; }
    @media(min-width:980px){ .grid-3{ grid-template-columns: repeat(3, 1fr); } }
    .cy-card {
      background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
      border:1px solid var(--cy-grid); border-radius:14px; padding:14px;
      transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
      position:relative; overflow:hidden;
    }
    .cy-card:hover { transform: translateY(-4px); border-color: rgba(110,231,255,.55);
      box-shadow: 0 12px 40px rgba(110,231,255,.08), 0 0 0 1px rgba(110,231,255,.25) inset; }
    .cy-card .mini { color: var(--cy-mute); }

    /* Simulator */
    .sim { display:grid; gap:16px; grid-template-columns:1fr; }
    @media(min-width:1100px){ .sim{ grid-template-columns: 1.2fr 1fr; } }
    .sim-controls .row { display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-bottom:10px; }
    .select, .input, .toggle { width:100%; padding:10px 12px; border-radius:10px; border:1px solid var(--cy-grid); background:#0f141c; color:inherit; }
    .toggle { display:flex; align-items:center; gap:8px; padding:10px; cursor:pointer; user-select:none; }
    .toggle input { accent-color: var(--cy-neon); }

    .risk {
      background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
      border:1px solid var(--cy-grid); border-radius:14px; padding:12px;
    }
    .risk-score { font-size:46px; font-weight:900; }
    .risk-meter { height:12px; border-radius:10px; border:1px solid var(--cy-grid); background:#0f141c; overflow:hidden; }
    .risk-meter > div { height:100%; width:0%; background:linear-gradient(90deg,#63ffa5,#ffd75a,#ff4d6d); transition: width .5s ease; }

    /* CTA buttons */
    .btn.ghost { border:1px solid var(--cy-grid); }
    .btn.danger { border:1px solid rgba(255,77,109,.4); color:#ffdfe6; }
    .btn.neon { background: linear-gradient(90deg,var(--cy-neon),var(--cy-accent)); color:#061019; border:0; font-weight:800; }

    /* subtle grid overlay for sections */
    .grid-overlay::before {
      content:''; position:absolute; inset:0; pointer-events:none;
      background:
        linear-gradient(90deg, rgba(255,255,255,.04) 1px, transparent 1px) 0 0/ 40px 40px,
        linear-gradient(0deg, rgba(255,255,255,.04) 1px, transparent 1px) 0 0/ 40px 40px;
      mask: linear-gradient(to bottom, transparent, rgba(0,0,0,.3) 20%, rgba(0,0,0,.3) 80%, transparent);
      opacity:.25; border-radius:16px;
    }

    /* tiny badge */
    .badge { display:inline-flex; align-items:center; gap:6px; padding:2px 8px; border-radius:999px; border:1px solid var(--cy-grid); font-size:12px; color:var(--cy-mute); }
    .dot-live { display:inline-block; width:8px; height:8px; background:#f44; border-radius:999px; animation:pulse 1.8s infinite; }
    @keyframes pulse { 0%{ box-shadow:0 0 0 0 rgba(255,77,109,.6);} 70%{ box-shadow:0 0 0 8px rgba(255,77,109,0);} 100%{ box-shadow:0 0 0 0 rgba(255,77,109,0);} }
  </style>
</head>
<body>
  <!-- Background FX -->
  <div class="cy-layers">
    <canvas id="cy-matrix" aria-hidden="true"></canvas>
    <div class="cy-scanlines" aria-hidden="true"></div>
  </div>

  <div data-include="partials/header.html"></div>

  <!-- HERO -->
  <section class="container hero cy-section" style="margin-top:20px">
    <span class="eyebrow">EVRT Cyber Operations</span>
    <h1 class="gradient-text">Assume breach.<br/>Outlearn the adversary.</h1>
    <p class="sub">Red/Blue/Purple teaming, SecOps automation, and cloud/app hardening. Real-time detection and response, wrapped in a UX that actually helps you win.</p>
    <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:10px">
      <button id="btn-sim" class="btn neon">Launch breach simulator</button>
      <a class="btn ghost" href="contact.html">Book a breach drill</a>
      <span class="badge"><span class="dot-live"></span> live demo • simulated data</span>
    </div>

    <div class="stats">
      <div class="stat">
        <div class="big" id="ctr1">0</div>
        <div class="muted">Assets indexed</div>
      </div>
      <div class="stat">
        <div class="big" id="ctr2">0</div>
        <div class="muted">Controls validated</div>
      </div>
      <div class="stat">
        <div class="big" id="ctr3">0</div>
        <div class="muted">Signals/min analyzed</div>
      </div>
    </div>
  </section>

  <!-- TERMINAL + TICKER -->
  <section class="container section cy-section">
    <div class="grid grid-2">
      <div class="terminal grid-overlay">
        <div class="term-top">
          <span class="dot r"></span><span class="dot y"></span><span class="dot g"></span>
          <strong style="margin-left:6px">/opt/evrt/secops</strong>
          <span class="muted" style="margin-left:auto">root@evrt:~$</span>
        </div>
        <div id="term" class="term-body" role="log" aria-live="polite"></div>
      </div>

      <div class="card grid-overlay">
        <h3 style="display:flex;align-items:center;gap:8px;margin-top:2px">Live Threat Feed
          <span class="badge"><span class="dot-live"></span> monitoring</span>
        </h3>
        <div class="ticker" style="margin-top:6px">
          <span class="ticker-label">IOC</span>
          <div id="ticker" class="ticker-track"></div>
        </div>
        <div class="muted" style="margin-top:8px">Aggregated indicators: OSINT + internal honeypots + partner intel. Demo stream below.</div>
        <div id="ioc-list" class="prose" style="max-height:200px; overflow:auto; margin-top:8px"></div>
      </div>
    </div>
  </section>

  <!-- CAPABILITIES -->
  <section class="container section cy-section">
    <h2 class="gradient-text">What we do</h2>
    <p class="sub">Operator-grade services with automation where it matters.</p>
    <div class="grid-3">
      <div class="cy-card">
        <h3>Red Team</h3>
        <p class="mini">External recon, initial access, lateral movement, crown-jewel reach.</p>
        <ul class="cta-sugg">
          <li>Phishing & MFA fatigue campaigns</li>
          <li>Cloud misconfig & key sprawl hunts</li>
          <li>Attack path mapping (BloodHound-style)</li>
        </ul>
      </div>
      <div class="cy-card">
        <h3>Blue Team</h3>
        <p class="mini">Detection engineering, playbooks, and response time compression.</p>
        <ul class="cta-sugg">
          <li>Sigma → SIEM rules with test data</li>
          <li>EDR tuning, alert dedup & triage</li>
          <li>IR runbooks + tabletops</li>
        </ul>
      </div>
      <div class="cy-card">
        <h3>Purple Team</h3>
        <p class="mini">Continuous exercise loop that improves both sides weekly.</p>
        <ul class="cta-sugg">
          <li>Atomic tests mapped to MITRE ATT&CK</li>
          <li>Gaps → fixes → re-test automation</li>
          <li>Dashboard of detection coverage</li>
        </ul>
      </div>
      <div class="cy-card">
        <h3>Cloud & AppSec</h3>
        <p class="mini">IaC guardrails, least privilege, secrets hygiene, SAST/DAST.</p>
        <ul class="cta-sugg">
          <li>Multi-cloud posture baselines</li>
          <li>CI/CD sign & SBOM policy gates</li>
          <li>Runtime protections</li>
        </ul>
      </div>
      <div class="cy-card">
        <h3>SecOps Automation</h3>
        <p class="mini">SOAR playbooks that actually save time, not add noise.</p>
        <ul class="cta-sugg">
          <li>Enrichment: VT, WHOIS, sandbox, GH</li>
          <li>Quarantine, revocation, rotate keys</li>
          <li>Case trails + learning loops</li>
        </ul>
      </div>
      <div class="cy-card">
        <h3>Compliance That Helps</h3>
        <p class="mini">SOC2/ISO/NIST, but mapped to risk, not busywork.</p>
        <ul class="cta-sugg">
          <li>Control catalogs that devs accept</li>
          <li>Evidence via automation</li>
          <li>Board-ready metrics</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- BREACH SIMULATOR -->
  <section class="container section cy-section">
    <h2 class="gradient-text">Breach simulator</h2>
    <p class="sub">Pick an entry vector, toggle your controls, get a rapid risk & blast radius estimate. (All data here is simulated.)</p>
    <div class="sim">
      <div class="sim-controls card grid-overlay">
        <div class="row">
          <select id="vector" class="select">
            <option value="phish">Phishing (MFA fatigue)</option>
            <option value="keys">Leaked keys / tokens</option>
            <option value="s3">Exposed S3 bucket</option>
            <option value="rce">App RCE (dependency)</option>
            <option value="vpn">VPN credential stuffing</option>
          </select>
          <select id="crown" class="select">
            <option value="pii">Customer PII</option>
            <option value="secrets">Secrets / signing keys</option>
            <option value="ip">Source code / IP</option>
            <option value="ops">Ops control / prod data</option>
          </select>
        </div>
        <div class="row">
          <label class="toggle"><input id="ctl-mfa" type="checkbox" checked/> MFA enforced</label>
          <label class="toggle"><input id="ctl-edr" type="checkbox" checked/> EDR coverage</label>
        </div>
        <div class="row">
          <label class="toggle"><input id="ctl-siem" type="checkbox" checked/> SIEM detections</label>
          <label class="toggle"><input id="ctl-least" type="checkbox" checked/> Least privilege</label>
        </div>
        <div class="row">
          <label class="toggle"><input id="ctl-rotate" type="checkbox" checked/> Key rotation</label>
          <label class="toggle"><input id="ctl-alert" type="checkbox" checked/> Alerting on anomalies</label>
        </div>

        <div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:8px">
          <button id="btn-run" class="btn neon">Run simulation</button>
          <button id="btn-export" class="btn">Export JSON</button>
          <a class="btn danger" href="contact.html">Talk to a responder</a>
        </div>
      </div>

      <div class="risk card grid-overlay">
        <div style="display:flex; justify-content:space-between; align-items:center">
          <div>
            <div class="mini">Risk score</div>
            <div class="risk-score"><span id="risk">—</span>/100</div>
          </div>
          <div>
            <div class="mini">Blast radius</div>
            <div style="font-size:22px; font-weight:800"><span id="radius">—</span></div>
          </div>
        </div>
        <div class="risk-meter" style="margin:10px 0 8px">
          <div id="bar"></div>
        </div>
        <div class="mini">Why this score</div>
        <ul id="why" class="cta-sugg"></ul>
        <div style="margin-top:10px">
          <div class="mini">Recommended actions (top)</div>
          <ul id="fixes" class="cta-sugg"></ul>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="container section cy-section">
    <div class="card" style="display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between">
      <div>
        <h3 style="margin:0 0 4px">Run a 2-week Purple Team sprint</h3>
        <p class="muted" style="margin:0">We test real TTPs, harden controls, and leave you faster than we found you.</p>
      </div>
      <div style="display:flex;gap:8px">
        <a class="btn neon" href="contact.html">Start a sprint</a>
        <a class="btn ghost" href="pricing.html">See pricing</a>
      </div>
    </div>
  </section>

  <div data-include="partials/footer.html"></div>

  <script defer src="assets/app.js"></script>
  <script>
    /* ========= MATRIX RAIN BACKDROP ========= */
    (function matrix(){
      const c = document.getElementById('cy-matrix'); const ctx = c.getContext('2d');
      function resize(){ c.width = window.innerWidth; c.height = window.innerHeight; }
      resize(); window.addEventListener('resize', resize);
      const chars = 'アカサタナハマヤラワ0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ$#@!*%&';
      const cols = ()=>Math.floor(c.width / 14);
      let drops = Array(cols()).fill(0).map(()=>Math.random()*c.height/14);
      function step(){
        ctx.fillStyle = 'rgba(10,14,20,0.08)'; ctx.fillRect(0,0,c.width,c.height);
        ctx.fillStyle = '#6ee7ff';
        ctx.shadowColor = '#6ee7ff88'; ctx.shadowBlur = 8;
        for(let i=0;i<drops.length;i++){
          const x = i*14, y = drops[i]*14;
          const ch = chars[Math.floor(Math.random()*chars.length)];
          ctx.fillText(ch, x, y);
          if(y > c.height && Math.random()>0.975) drops[i]=0;
          drops[i]++;
        }
        requestAnimationFrame(step);
      }
      ctx.font = '14px monospace';
      step();
    })();

    /* ========= HERO COUNTERS ========= */
    function animateNumber(el, target, dur=1000){
      const t0 = performance.now(); const start = 0;
      function tick(t){
        const p = Math.min(1, (t-t0)/dur); const v = Math.floor(start + (target-start)*(1- Math.cos(p*Math.PI))/2);
        el.textContent = v.toLocaleString();
        if(p<1) requestAnimationFrame(tick);
      } requestAnimationFrame(tick);
    }
    animateNumber(document.getElementById('ctr1'), 128_432);
    animateNumber(document.getElementById('ctr2'), 4_219);
    animateNumber(document.getElementById('ctr3'), 19_840);

    /* ========= TERMINAL ========= */
    const term = document.getElementById('term');
    function println(s, cls=''){ const line = document.createElement('div'); line.className = 'term-line ' + cls; line.textContent = s; term.appendChild(line); term.scrollTop = term.scrollHeight; }
    function typeCmd(cmd, cb){
      const row = document.createElement('div'); row.className='term-line';
      term.appendChild(row); let i=0;
      const iv = setInterval(()=>{ row.textContent = '$ ' + cmd.slice(0, ++i) + (i%2? '_':''); term.scrollTop = term.scrollHeight;
        if(i>=cmd.length){ clearInterval(iv); row.innerHTML = '$ ' + cmd + ' <span class="term-caret"></span>'; cb&&cb(); }}, 20);
    }
    const demo = [
      ()=> typeCmd('evrt scan --surface perimeter --quick', ()=> {
        setTimeout(()=> println('> Resolving assets… 342 found', 'term-success'), 200);
        setTimeout(()=> println('> Checking TLS, HTTP headers, CSP…', 'term-success'), 600);
        setTimeout(()=> println('! Missing security.txt on 3 assets', 'term-warn'), 900);
        setTimeout(()=> println('! CSP allows unsafe-inline on app.evrt.example', 'term-warn'), 1200);
        setTimeout(()=> println('✓ Surface scan complete in 4.9s', 'term-success'), 1700);
      }),
      ()=> typeCmd('evrt detect --simulate atomic/T1059.003', ()=> {
        setTimeout(()=> println('> Injecting test event…', 'term-success'), 300);
        setTimeout(()=> println('✓ SIEM rule matched: Command & Control beacon (simulated)', 'term-success'), 900);
        setTimeout(()=> println('> Mean detection time: 1.8s', 'term-success'), 1300);
      }),
      ()=> typeCmd('evrt respond --playbook revoke-keys --dry-run', ()=> {
        setTimeout(()=> println('> Would revoke 2 long-lived tokens', 'term-warn'), 500);
        setTimeout(()=> println('> Would rotate 4 signing keys', 'term-warn'), 900);
        setTimeout(()=> println('✓ Dry run complete', 'term-success'), 1300);
      })
    ];
    (function loop(i=0){ demo[i](); setTimeout(()=> loop((i+1)%demo.length), 5200); })();

    /* ========= THREAT TICKER ========= */
    const iocEl = document.getElementById('ticker'); const iocList = document.getElementById('ioc-list');
    const countries = ['US','DE','SG','IN','NL','GB','FR','BR','JP','UA','CA'];
    const mal = ['QakBot','CobaltStrike','AsyncRAT','RedLine','AgentTesla','Remcos','DarkGate'];
    const makeIOC = ()=> ({
      ip: `${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`,
      sha: (crypto.getRandomValues(new Uint8Array(8))).reduce((a,b)=>a+('0'+b.toString(16)).slice(-2),''),
      tag: mal[Math.floor(Math.random()*mal.length)],
      cc: countries[Math.floor(Math.random()*countries.length)]
    });
    function pushIOC(){
      const x = makeIOC();
      const item = document.createElement('span');
      item.textContent = `${x.ip} • ${x.tag} • ${x.cc} • ${x.sha}`;
      iocEl.appendChild(item);
      if(iocEl.children.length>18){ iocEl.removeChild(iocEl.firstChild); }
      const li = document.createElement('div');
      li.className='row'; li.innerHTML = `<strong>${x.tag}</strong><span class="muted">${x.ip} • ${x.cc} • ${x.sha}</span>`;
      iocList.prepend(li);
      const rows = iocList.querySelectorAll('.row'); if(rows.length>12) rows[rows.length-1].remove();
    }
    for(let i=0;i<16;i++) pushIOC();
    setInterval(pushIOC, 1800);

    /* ========= BREACH SIMULATOR ========= */
    const selVector = document.getElementById('vector');
    const selCrown  = document.getElementById('crown');
    const ctl = id => document.getElementById(id);
    const state = {
      vector: selVector.value, crown: selCrown.value,
      mfa:true, edr:true, siem:true, least:true, rotate:true, alert:true
    };
    ['ctl-mfa','ctl-edr','ctl-siem','ctl-least','ctl-rotate','ctl-alert'].forEach(k=>{
      ctl(k).addEventListener('change', ()=>{ state[k.split('-')[1]] = ctl(k).checked; });
    });
    selVector.addEventListener('change', ()=> state.vector = selVector.value);
    selCrown .addEventListener('change', ()=> state.crown  = selCrown.value);

    function score(state){
      // base risk by vector (0–100)
      const base = { phish:68, keys:82, s3:74, rce:88, vpn:70 }[state.vector] || 70;
      // control reductions
      let risk = base;
      const reasons = [];
      function reduce(cond, pts, why){ if(cond){ risk -= pts; reasons.push(`-${pts}: ${why}`); } else { reasons.push(`+${Math.ceil(pts/2)}: Missing ${why}`); risk += Math.ceil(pts/2); } }
      reduce(state.mfa,    10, 'MFA resisted account takeover');
      reduce(state.edr,    12, 'EDR blocks common payloads');
      reduce(state.siem,    8, 'Detections trigger early');
      reduce(state.least,  10, 'Least privilege narrows lateral movement');
      reduce(state.rotate,  6, 'Key rotation limits token lifetime');
      reduce(state.alert,   8, 'Anomaly alerts shorten MTTR');
      // clamp
      risk = Math.max(1, Math.min(99, Math.round(risk)));
      // blast radius mapping
      const radius = risk>80 ? 'Org-wide' : risk>65 ? 'Multi-env' : risk>50 ? 'Single env' : 'Limited';
      // fixes
      const fixes = [];
      if(!state.mfa)   fixes.push('Enforce phishing-resistant MFA (FIDO2/WebAuthn).');
      if(!state.edr)   fixes.push('Deploy EDR to all prod endpoints & servers.');
      if(!state.siem)  fixes.push('Add ATT&CK-mapped detections for your top 10 TTPs.');
      if(!state.least) fixes.push('Audit IAM; remove wildcard grants; add JIT elevation.');
      if(!state.rotate)fixes.push('Rotate long-lived keys; enforce short-lived tokens.');
      if(!state.alert) fixes.push('Wire anomaly alerts to on-call with playbooks.');
      if(fixes.length===0) fixes.push('Run purple-team re-test monthly to keep the edge.');
      return { risk, reasons, radius, fixes };
    }

    function renderSim(){
      const out = score(state);
      document.getElementById('risk').textContent = out.risk;
      document.getElementById('bar').style.width = out.risk + '%';
      document.getElementById('radius').textContent = out.radius;
      const why = document.getElementById('why'); why.innerHTML='';
      out.reasons.forEach(r=>{ const li=document.createElement('li'); li.textContent=r; why.appendChild(li); });
      const fx = document.getElementById('fixes'); fx.innerHTML='';
      out.fixes.forEach(r=>{ const li=document.createElement('li'); li.textContent=r; fx.appendChild(li); });
      return out;
    }

    document.getElementById('btn-run').addEventListener('click', ()=>{
      // cinematic: print a terminal job for this simulation
      typeCmd(`evrt simulate --vector ${state.vector} --crown ${state.crown}`, ()=>{
        println('> Running TTPs in lab…', 'term-success');
        setTimeout(()=> println('> Aggregating control signals…', 'term-success'), 500);
        setTimeout(()=> { println('✓ Simulation complete. See Risk panel →', 'term-success'); renderSim(); }, 1100);
      });
    });

    document.getElementById('btn-export').addEventListener('click', ()=>{
      const out = renderSim();
      const payload = {
        timestamp: new Date().toISOString(),
        input: state, result: out, mapping: {
          vectorToATTACK: {
            phish: ['TA0001', 'TA0006'], keys:['TA0006','TA0007'], s3:['TA0006','TA0009'],
            rce:['TA0001','TA0003','TA0004'], vpn:['TA0001','TA0006']
          }[state.vector]
        }
      };
      const a = document.createElement('a');
      a.href = URL.createObjectURL(new Blob([JSON.stringify(payload,null,2)], {type:'application/json'}));
      a.download = `evrt_sim_${Date.now()}.json`; a.click();
    });

    document.getElementById('btn-sim').addEventListener('click', ()=>{
      // Scroll to simulator and auto-run once for wow-effect
      document.getElementById('btn-run').scrollIntoView({behavior:'smooth', block:'center'});
      setTimeout(()=> document.getElementById('btn-run').click(), 600);
    });
  </script>
</body>
</html>
