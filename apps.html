<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>EVRT — Apps</title>
  <meta name="description" content="EVRT App Launcher: Social AI, Ad Studio, Ad Lab, Dashboard, Cybersecurity, and more. Filters, live metrics, and a cinematic UX."/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300..900&family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="assets/style.css"/>

  <style>
    :root{
      --apps-neon:#6ee7ff; --apps-accent:#63ffa5; --apps-amber:#ffd75a; --apps-danger:#ff4d6d;
      --apps-bg:#0a0e14; --apps-card:#0f141c; --apps-grid:rgba(255,255,255,.06); --apps-mute:#8fa2b7;
    }
    body{ background: radial-gradient(1400px 900px at 80% -260px,#142034 0,#0a0e14 65%); }

    /* Backdrop */
    .layers{ position:fixed; inset:0; z-index:0; pointer-events:none; }
    #field{ position:absolute; inset:0; opacity:.25 }
    .scan{ position:absolute; inset:0; background:linear-gradient(to bottom, rgba(255,255,255,.03) 1px, transparent 1px) 0 0/100% 3px; opacity:.26; mix-blend-mode:overlay; }

    .section{ position:relative; z-index:1; }
    .eyebrow{ letter-spacing:.12em; text-transform:uppercase; color:var(--apps-mute); }

    /* Controls */
    .controls{ display:flex; gap:8px; flex-wrap:wrap; align-items:center }
    .control{ border:1px solid var(--apps-grid); border-radius:12px; background:#0f141c; padding:10px 12px; color:inherit }
    .chips{ display:flex; flex-wrap:wrap; gap:8px }
    .chip{ padding:6px 10px; border-radius:999px; border:1px solid var(--apps-grid); cursor:pointer; user-select:none }
    .chip.active{ background:linear-gradient(90deg,var(--apps-neon),var(--apps-accent)); color:#061019; border:0; font-weight:800; }

    /* Dock */
    .dock{ display:flex; gap:10px; overflow:auto; padding-bottom:4px }
    .dock-item{ min-width:160px; background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02)); border:1px solid var(--apps-grid); border-radius:12px; padding:10px; position:relative }
    .dock-item .mini{ color:var(--apps-mute); font-size:12px }
    .dock-item .glow{ position:absolute; inset:auto auto -8px -8px; width:80px; height:80px; background:radial-gradient(closest-side, rgba(110,231,255,.35), transparent 70%); filter:blur(10px) }

    /* Grid */
    .grid{ display:grid; gap:14px; grid-template-columns:1fr; }
    @media(min-width:850px){ .grid{ grid-template-columns:repeat(2,1fr); } }
    @media(min-width:1200px){ .grid{ grid-template-columns:repeat(3,1fr); } }

    /* Cards */
    .card{ position:relative; border:1px solid var(--apps-grid); border-radius:16px; background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02)); padding:14px; overflow:hidden; transform-style:preserve-3d; transition:transform .15s ease, box-shadow .2s ease, border-color .2s; }
    .card:hover{ border-color:rgba(110,231,255,.45); box-shadow:0 14px 50px rgba(110,231,255,.10), 0 0 0 1px rgba(110,231,255,.25) inset; }
    .card .orb{ position:absolute; inset:auto auto -10% -10%; width:140px; height:140px; background:radial-gradient(closest-side, rgba(110,231,255,.28), transparent 70%); filter:blur(12px); pointer-events:none }
    .badge{ display:inline-flex; align-items:center; gap:6px; padding:4px 10px; border:1px solid var(--apps-grid); border-radius:999px; font-size:12px; }
    .muted{ color:var(--apps-mute); }
    .row{ display:flex; justify-content:space-between; align-items:center; gap:10px }
    .row.wrap{ flex-wrap:wrap }
    .btn.neon{ background:linear-gradient(90deg,var(--apps-neon),var(--apps-accent)); color:#061019; border:0; font-weight:800; }
    .btn.ghost{ border:1px solid var(--apps-grid); }
    .tags{ display:flex; gap:6px; flex-wrap:wrap; }
    .tag{ font-size:11px; padding:2px 8px; border:1px solid var(--apps-grid); border-radius:999px; color:var(--apps-mute) }

    /* Live bits */
    .ping{ width:8px; height:8px; border-radius:50%; background:#63ffa5; box-shadow:0 0 0 6px rgba(99,255,165,.15); }
    .knum{ font-weight:900; font-size:20px }

    /* App Race & Compare */
    canvas.chart{ width:100%; height:240px; border:1px solid var(--apps-grid); border-radius:12px; background:#0f141c; }
    .compare-drawer{ position:fixed; left:50%; transform:translateX(-50%); bottom:18px; width:min(1080px,92vw); background:#07121b; border:1px solid rgba(110,231,255,.35); border-radius:14px; z-index:40; display:none; }
    .compare-drawer .inner{ padding:12px }
    .compare-list{ display:flex; gap:8px; flex-wrap:wrap; }
    .pill{ display:inline-flex; align-items:center; gap:6px; padding:4px 10px; border:1px solid var(--apps-grid); border-radius:999px; background:#0f141c; }
    #radar{ width:100%; height:240px; border:1px solid var(--apps-grid); border-radius:12px; background:#0f141c; }

    /* Command Palette */
    .palette{ position:fixed; inset:0; display:none; place-items:center; z-index:60; backdrop-filter:blur(6px); background:rgba(5,8,13,.55) }
    .palette .box{ width:min(800px,92vw); background:#0f141c; border:1px solid var(--apps-grid); border-radius:12px; overflow:hidden }
    .palette input{ width:100%; padding:12px; border:0; outline:0; background:#0b0e13; color:inherit; font-size:16px }
    .palette .rows{ max-height:300px; overflow:auto }
    .palette .row{ padding:10px 12px; border-top:1px solid rgba(255,255,255,.06); display:flex; justify-content:space-between; gap:8px; cursor:pointer }
    .palette .row:hover{ background:rgba(110,231,255,.08) }

    /* Grid overlay decoration */
    .grid-overlay{ position:relative; }
    .grid-overlay::before{
      content:''; position:absolute; inset:0; pointer-events:none;
      background:
        linear-gradient(90deg, rgba(255,255,255,.04) 1px, transparent 1px) 0 0/ 40px 40px,
        linear-gradient(0deg, rgba(255,255,255,.04) 1px, transparent 1px) 0 0/ 40px 40px;
      mask: linear-gradient(to bottom, transparent, rgba(0,0,0,.3) 20%, rgba(0,0,0,.3) 80%, transparent);
      opacity:.22; border-radius:16px;
    }

    @media(max-width:880px){ .row.wrap>.btn{ width:100% } }
  </style>
</head>
<body>
  <!-- Backdrop -->
  <div class="layers">
    <canvas id="field" aria-hidden="true"></canvas>
    <div class="scan" aria-hidden="true"></div>
  </div>

  <div data-include="partials/header.html"></div>

  <!-- HERO -->
  <section class="container hero section" style="margin-top:20px">
    <span class="eyebrow">EVRT Apps</span>
    <h1 class="gradient-text">Launchpad.<br/>Pick your weapon.</h1>
    <p class="sub">Search, filter, pin favorites to the Dock, compare apps, and dive in. Everything’s simulated but feels alive.</p>

    <!-- Controls -->
    <div class="controls" style="margin-top:10px">
      <input id="search" class="control" placeholder="Search apps (Press ⌘K / Ctrl+K)…" />
      <div class="chips" id="chips">
        <span class="chip active" data-cat="all">All</span>
        <span class="chip" data-cat="marketing">Marketing</span>
        <span class="chip" data-cat="analytics">Analytics</span>
        <span class="chip" data-cat="security">Security</span>
        <span class="chip" data-cat="ops">Ops</span>
      </div>
      <button id="shuffle" class="btn">Shuffle</button>
      <button id="clearPins" class="btn ghost">Clear Dock</button>
    </div>
  </section>

  <!-- DOCK -->
  <section class="container section">
    <div class="row wrap">
      <h3 style="margin:0">Dock (Favorites)</h3>
      <div class="muted">Drag/Pin any app to keep it here. Stored locally.</div>
    </div>
    <div id="dock" class="dock" style="margin-top:8px"></div>
  </section>

  <!-- GRID -->
  <section class="container section">
    <div class="grid" id="grid"></div>
  </section>

  <!-- RACE + COMPARE -->
  <section class="container section">
    <div class="grid">
      <div class="card grid-overlay">
        <div class="row">
          <h3 style="margin:0">App Race — ROI / Speed / Impact</h3>
          <div class="muted">Simulated bar race. Toggle metric:</div>
        </div>
        <div class="chips" id="metrics" style="margin-top:8px">
          <span class="chip active" data-m="roi">ROI</span>
          <span class="chip" data-m="speed">Speed</span>
          <span class="chip" data-m="impact">Impact</span>
        </div>
        <canvas id="race" class="chart" width="800" height="240"></canvas>
      </div>
      <div class="card grid-overlay">
        <div class="row">
          <h3 style="margin:0">Spotlight</h3>
          <div class="muted">Rotates every few seconds.</div>
        </div>
        <div id="spot" style="margin-top:10px"></div>
      </div>
    </div>
  </section>

  <!-- COMPARE DRAWER -->
  <div id="drawer" class="compare-drawer">
    <div class="inner">
      <div class="row wrap">
        <strong>Compare</strong>
        <div class="compare-list" id="compareList"></div>
        <div style="margin-left:auto;display:flex;gap:8px">
          <button id="runCompare" class="btn neon">Run compare</button>
          <button id="closeDrawer" class="btn">Close</button>
        </div>
      </div>
      <canvas id="radar" width="900" height="240" style="margin-top:10px"></canvas>
    </div>
  </div>

  <!-- COMMAND PALETTE -->
  <div id="palette" class="palette" aria-modal="true" role="dialog">
    <div class="box">
      <input id="palInput" placeholder="Type to jump to an app…"/>
      <div id="palRows" class="rows"></div>
    </div>
  </div>

  <div data-include="partials/footer.html"></div>

  <script defer src="assets/app.js"></script>
  <script>
    /* ===== Star field background ===== */
    (function starfield(){
      const c = document.getElementById('field'); const ctx = c.getContext('2d');
      function resize(){ c.width = innerWidth; c.height = innerHeight; }
      resize(); addEventListener('resize', resize);
      const N = 240, pts = [];
      for(let i=0;i<N;i++){ pts.push({x:Math.random()*c.width, y:Math.random()*c.height, z:Math.random()*1, v: 0.4 + Math.random()*1}); }
      (function tick(){
        ctx.fillStyle = 'rgba(10,14,20,0.10)'; ctx.fillRect(0,0,c.width,c.height);
        pts.forEach(p=>{
          p.y += p.v; if(p.y>c.height){ p.y = -4; p.x = Math.random()*c.width; }
          const r = Math.max(.5, (1-p.z)*2.2);
          ctx.beginPath(); ctx.fillStyle = '#6ee7ff'; ctx.globalAlpha = 0.2 + (1-p.z)*0.8;
          ctx.arc(p.x, p.y, r, 0, 6.283); ctx.fill(); ctx.globalAlpha = 1;
        });
        requestAnimationFrame(tick);
      })();
    })();

    /* ===== App data ===== */
    const APPS = [
      { id:'social', name:'EVRT Social AI', path:'social-ai.html', cat:['marketing','analytics'], desc:'Draft on-brand content, predict best minute, schedule, and preview.', tags:['Scheduler','Predictive','Cross-platform'], roi:93, speed:88, impact:92, color:'#6ee7ff' },
      { id:'adstudio', name:'Ad Studio', path:'ad-studio.html', cat:['marketing','analytics'], desc:'Audience builder → creative → plan. Predict before you spend.', tags:['Audience','Creative','ROAS'], roi:91, speed:84, impact:95, color:'#63ffa5' },
      { id:'adlab', name:'Ad Demo Lab', path:'adlab.html', cat:['marketing','analytics'], desc:'Collider + Predictor + Bandit Arena + Radar. Alien-grade sandbox.', tags:['Bandits','Anomalies','Export'], roi:88, speed:90, impact:90, color:'#ffd75a' },
      { id:'dash', name:'Command Dashboard', path:'dashboard.html', cat:['analytics'], desc:'KPIs, performance, audience, funnel, cohorts, and alerts.', tags:['KPIs','Cohorts','ROAS'], roi:86, speed:92, impact:88, color:'#8ab6ff' },
      { id:'cyber', name:'Cybersecurity Ops', path:'cybersecurity.html', cat:['security','ops'], desc:'Terminal-grade visuals, scan animations, and guardrails vibe.', tags:['Scan','Guardrails','Visibility'], roi:82, speed:86, impact:87, color:'#ff4d6d' },
      { id:'portal', name:'Client Portal', path:'portal.html', cat:['ops'], desc:'Magic link login → projects, docs, messages. (Auth wiring optional.)', tags:['Auth','Docs','Messages'], roi:80, speed:85, impact:84, color:'#bde8ff' },
      { id:'projects', name:'Projects', path:'projects.html', cat:['ops','analytics'], desc:'Case studies & showcases with cinematic cards.', tags:['Showcase','Cards'], roi:78, speed:88, impact:80, color:'#caffbf' },
      { id:'app', name:'Client App (MVP)', path:'app.html', cat:['ops'], desc:'Signed URLs, realtime messages, private docs. (Supabase demo.)', tags:['Realtime','Storage'], roi:79, speed:82, impact:83, color:'#ffe29a' },
      { id:'consult', name:'Consulting', path:'consulting.html', cat:['ops'], desc:'Engagements, packages, and hands-on data + marketing builds.', tags:['Engage','Delivery'], roi:76, speed:84, impact:82, color:'#fbcfe8' },
      { id:'about', name:'About EVRT', path:'about.html', cat:['ops'], desc:'Who we are and how we work—fast, skeptical, ROI-led.', tags:['Team','Ethos'], roi:72, speed:90, impact:75, color:'#e9d5ff' },
    ];

    /* ===== State ===== */
    const state = {
      cat:'all', q:'', pins: new Set(JSON.parse(localStorage.getItem('evrt.pins')||'[]')),
      compare: new Set(), metric:'roi'
    };

    /* ===== Helpers ===== */
    const el = sel => document.querySelector(sel);
    const els = sel => Array.from(document.querySelectorAll(sel));
    function savePins(){ localStorage.setItem('evrt.pins', JSON.stringify([...state.pins])); }
    function fmt(n){ return n.toLocaleString(); }

    /* ===== Build Dock ===== */
    function renderDock(){
      const dock = el('#dock'); dock.innerHTML='';
      const items = APPS.filter(a=> state.pins.has(a.id));
      if(items.length===0){
        dock.innerHTML = '<div class="muted">No favorites yet. Click “Pin” on any app.</div>';
        return;
      }
      items.forEach(a=>{
        const d = document.createElement('div'); d.className='dock-item';
        d.innerHTML = `
          <div class="row">
            <strong>${a.name}</strong>
            <span class="badge"><span class="ping"></span> live</span>
          </div>
          <div class="mini" style="margin-top:4px">${a.desc}</div>
          <div class="row wrap" style="margin-top:8px">
            <a class="btn neon" href="${a.path}">Open</a>
            <button class="btn" data-unpin="${a.id}">Unpin</button>
          </div>
          <div class="glow"></div>
        `;
        dock.appendChild(d);
      });
      dock.querySelectorAll('[data-unpin]').forEach(b=>{
        b.onclick = ()=>{ state.pins.delete(b.dataset.unpin); savePins(); renderDock(); renderGrid(); };
      });
    }

    /* ===== Build Grid ===== */
    function match(app){
      const inCat = state.cat==='all' || app.cat.includes(state.cat);
      if(!inCat) return false;
      if(!state.q) return true;
      const q = state.q.toLowerCase();
      return [app.name, app.desc, ...(app.tags||[])].join(' ').toLowerCase().includes(q);
    }

    function cardHTML(a){
      const pinned = state.pins.has(a.id);
      const picked = state.compare.has(a.id);
      return `
        <div class="card" data-id="${a.id}" style="--tiltX:0;--tiltY:0">
          <div class="orb"></div>
          <div class="row">
            <div class="badge" style="border-color:${a.color}80">${a.cat.map(c=>c[0].toUpperCase()+c.slice(1)).join(' • ')}</div>
            <div class="row" style="gap:8px">
              <span class="badge" title="ROI score"><svg width="12" height="12"><circle cx="6" cy="6" r="5" fill="${a.color}"/></svg> ${a.roi}</span>
              <span class="badge" title="Speed score"><svg width="12" height="12"><rect x="2" y="2" width="8" height="8" fill="${a.color}"/></svg> ${a.speed}</span>
              <span class="badge" title="Impact score"><svg width="12" height="12"><polygon points="6,1 11,11 1,11" fill="${a.color}"/></svg> ${a.impact}</span>
            </div>
          </div>
          <h3 style="margin:8px 0 4px">${a.name}</h3>
          <div class="muted">${a.desc}</div>
          <div class="tags" style="margin-top:8px">${(a.tags||[]).map(t=>`<span class="tag">${t}</span>`).join('')}</div>
          <div class="row wrap" style="margin-top:10px">
            <a class="btn neon" href="${a.path}">Launch</a>
            <button class="btn" data-compare="${a.id}">${picked?'Remove from Compare':'Add to Compare'}</button>
            <button class="btn ${pinned?'ghost':''}" data-pin="${a.id}">${pinned?'Unpin':'Pin'}</button>
          </div>
        </div>
      `;
    }

    function renderGrid(){
      const grid = el('#grid'); grid.innerHTML='';
      const list = APPS.filter(match);
      if(list.length===0){ grid.innerHTML = '<div class="muted">No matches. Try a different filter.</div>'; return; }
      list.forEach(a=>{
        const wrap = document.createElement('div'); wrap.innerHTML = cardHTML(a);
        grid.appendChild(wrap.firstElementChild);
      });
      // hooks
      els('[data-pin]').forEach(b=>{
        b.onclick = ()=>{
          const id = b.dataset.pin;
          if(state.pins.has(id)) state.pins.delete(id); else state.pins.add(id);
          savePins(); renderDock(); renderGrid();
        };
      });
      els('[data-compare]').forEach(b=>{
        b.onclick = ()=>{
          const id = b.dataset.compare;
          if(state.compare.has(id)) state.compare.delete(id); else state.compare.add(id);
          renderGrid(); renderDrawer();
        };
      });
      // tilt
      els('.card').forEach(card=>{
        card.addEventListener('mousemove', (e)=>{
          const r = card.getBoundingClientRect(); const x = (e.clientX - r.left)/r.width, y = (e.clientY - r.top)/r.height;
          const rx = (y-0.5)*8, ry = (x-0.5)*-8;
          card.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg)`;
        });
        card.addEventListener('mouseleave', ()=> card.style.transform='');
      });
    }

    /* ===== Filters/Search ===== */
    els('#chips .chip').forEach(ch=>{
      ch.onclick = ()=>{ els('#chips .chip').forEach(x=>x.classList.remove('active')); ch.classList.add('active'); state.cat = ch.dataset.cat; renderGrid(); };
    });
    el('#search').addEventListener('input', (e)=>{ state.q = e.target.value; renderGrid(); });
    el('#shuffle').onclick = ()=>{
      // quick shuffle for vibes
      APPS.sort(()=> Math.random() - 0.5); renderGrid();
    };
    el('#clearPins').onclick = ()=>{ state.pins.clear(); savePins(); renderDock(); renderGrid(); };

    /* ===== Spotlight ===== */
    function spotlight(){
      const spot = el('#spot');
      let i=0;
      function draw(){
        const a = APPS[i % APPS.length];
        spot.innerHTML = `
          <div class="card grid-overlay">
            <div class="row"><strong>${a.name}</strong><span class="badge"><span class="ping"></span> ready</span></div>
            <p class="muted" style="margin-top:6px">${a.desc}</p>
            <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-top:8px">
              <div class="card" style="padding:10px"><div class="muted">ROI</div><div class="knum">${a.roi}</div></div>
              <div class="card" style="padding:10px"><div class="muted">Speed</div><div class="knum">${a.speed}</div></div>
              <div class="card" style="padding:10px"><div class="muted">Impact</div><div class="knum">${a.impact}</div></div>
            </div>
            <div class="row wrap" style="margin-top:10px">
              <a class="btn neon" href="${a.path}">Open ${a.name.split(' ')[0]}</a>
              <button class="btn" onclick="navigator.clipboard.writeText(location.origin+location.pathname.replace('apps.html','${a.path}'))">Copy Link</button>
            </div>
          </div>
        `;
        i++; setTimeout(draw, 4200);
      }
      draw();
    }

    /* ===== Race Chart ===== */
    const race = el('#race'); const rctx = race.getContext('2d');
    function drawRace(){
      const W=race.width=race.clientWidth, H=race.height=race.clientHeight;
      rctx.clearRect(0,0,W,H); rctx.fillStyle='#0f141c'; rctx.fillRect(0,0,W,H);
      rctx.strokeStyle='rgba(255,255,255,.08)'; for(let i=0;i<5;i++){ rctx.beginPath(); rctx.moveTo(36,20+i*(H-60)/4); rctx.lineTo(W-20,20+i*(H-60)/4); rctx.stroke(); }
      const m = state.metric;
      const sorted = [...APPS].sort((a,b)=> b[m]-a[m]).slice(0,6);
      const bw = (H-60)/sorted.length;
      sorted.forEach((a,idx)=>{
        const val = a[m]; const w = (W-180) * (val/100);
        const y = 30 + idx*bw;
        rctx.fillStyle = a.color; rctx.shadowBlur = 10; rctx.shadowColor = a.color + '66';
        rctx.fillRect(140, y, w, bw-14); rctx.shadowBlur=0;
        rctx.fillStyle = '#9fb3c8'; rctx.font='12px Inter,system-ui';
        rctx.fillText(a.name, 20, y + (bw-14)/2 + 4);
        rctx.fillText(val.toFixed(0), 140 + w + 8, y + (bw-14)/2 + 4);
      });
    }
    els('#metrics .chip').forEach(ch=>{
      ch.onclick = ()=>{ els('#metrics .chip').forEach(x=>x.classList.remove('active')); ch.classList.add('active'); state.metric = ch.dataset.m; drawRace(); };
    });
    setInterval(()=>{
      // tiny jitter to feel alive
      APPS.forEach(a=>{ a.roi = Math.max(60, Math.min(99, a.roi + (Math.random()-0.5)*1.2)); a.speed = Math.max(60, Math.min(99, a.speed + (Math.random()-0.5)*1.2)); a.impact = Math.max(60, Math.min(99, a.impact + (Math.random()-0.5)*1.2)); });
      drawRace();
    }, 1400);

    /* ===== Compare Drawer + Radar ===== */
    function renderDrawer(){
      const drawer = el('#drawer'); const list = el('#compareList');
      list.innerHTML = '';
      if(state.compare.size===0){ drawer.style.display='none'; return; }
      drawer.style.display='block';
      APPS.filter(a=> state.compare.has(a.id)).forEach(a=>{
        const p=document.createElement('span'); p.className='pill'; p.style.borderColor=a.color+'80'; p.innerHTML=`<span style="width:10px;height:10px;border-radius:3px;background:${a.color};display:inline-block"></span>${a.name} <button data-rm="${a.id}" style="background:transparent;border:0;color:#9fb3c8;cursor:pointer">×</button>`;
        list.appendChild(p);
      });
      list.querySelectorAll('[data-rm]').forEach(b=> b.onclick=()=>{ state.compare.delete(b.dataset.rm); renderGrid(); renderDrawer(); });
    }
    el('#closeDrawer').onclick = ()=>{ el('#drawer').style.display='none'; };
    el('#runCompare').onclick = drawRadar;

    const radar = el('#radar'); const xrx = radar.getContext('2d');
    function drawRadar(){
      const items = APPS.filter(a=> state.compare.has(a.id));
      const W = radar.width=radar.clientWidth, H=radar.height=radar.clientHeight;
      xrx.clearRect(0,0,W,H); xrx.fillStyle='#0f141c'; xrx.fillRect(0,0,W,H);
      const cx=W/2, cy=H/2, R=Math.min(W,H)*0.38, axes=['ROI','Speed','Impact'];
      // grid
      xrx.strokeStyle='rgba(255,255,255,.08)'; for(let g=1; g<=4; g++){ xrx.beginPath(); for(let i=0;i<axes.length;i++){ const a=(i/axes.length)*Math.PI*2 - Math.PI/2; const x=cx+Math.cos(a)*R*g/4, y=cy+Math.sin(a)*R*g/4; if(i===0) xrx.moveTo(x,y); else xrx.lineTo(x,y);} xrx.closePath(); xrx.stroke(); }
      // axes
      xrx.fillStyle='#9fb3c8'; xrx.font='12px Inter,system-ui'; xrx.textAlign='center';
      for(let i=0;i<axes.length;i++){ const a=(i/axes.length)*Math.PI*2 - Math.PI/2; xrx.beginPath(); xrx.moveTo(cx,cy); xrx.lineTo(cx+Math.cos(a)*R, cy+Math.sin(a)*R); xrx.stroke(); xrx.fillText(axes[i], cx+Math.cos(a)*(R+14), cy+Math.sin(a)*(R+14)); }
      if(items.length===0) return;
      items.forEach((app,idx)=>{
        const vals=[app.roi,app.speed,app.impact].map(v=> v/100);
        xrx.beginPath(); vals.forEach((v,i)=>{ const a=(i/axes.length)*Math.PI*2 - Math.PI/2; const x=cx+Math.cos(a)*R*v, y=cy+Math.sin(a)*R*v; if(i===0) xrx.moveTo(x,y); else xrx.lineTo(x,y); });
        xrx.closePath(); xrx.fillStyle = app.color+'33'; xrx.strokeStyle=app.color; xrx.lineWidth=2; xrx.fill(); xrx.stroke();
      });
    }

    /* ===== Command Palette (Cmd/Ctrl + K) ===== */
    const palette = el('#palette'), palInput = el('#palInput'), palRows = el('#palRows');
    function openPalette(){ palette.style.display='grid'; palInput.value=''; buildRows(''); palInput.focus(); }
    function closePalette(){ palette.style.display='none'; }
    function buildRows(q){
      palRows.innerHTML='';
      APPS.filter(a=> !q || (a.name+' '+a.desc+' '+(a.tags||[]).join(' ')).toLowerCase().includes(q.toLowerCase()))
          .slice(0,20).forEach(a=>{
        const row=document.createElement('div'); row.className='row'; row.innerHTML=`<div>${a.name}<div class="muted">${a.desc}</div></div><a class="btn neon" href="${a.path}">Open</a>`;
        row.onclick = ()=> location.href = a.path;
        palRows.appendChild(row);
      });
    }
    addEventListener('keydown', (e)=>{
      if((e.metaKey || e.ctrlKey) && e.key.toLowerCase()==='k'){ e.preventDefault(); openPalette(); }
      if(e.key==='Escape'){ closePalette(); }
    });
    palInput.addEventListener('input', (e)=> buildRows(e.target.value));
    palette.addEventListener('click', (e)=>{ if(e.target===palette) closePalette(); });

    /* ===== Init ===== */
    renderDock(); renderGrid(); drawRace(); spotlight();
    addEventListener('resize', ()=>{ drawRace(); drawRadar(); });
  </script>
</body>
</html>
