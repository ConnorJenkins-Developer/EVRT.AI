<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>EVRT — Careers</title>
  <meta name="description" content="Join EVRT. Ship proof-driven growth systems: Social AI, Ad Studio, Ad Lab, Dashboards, and Guardrails."/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300..900&family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="assets/style.css"/>

  <!-- OG -->
  <meta property="og:title" content="EVRT — Careers"/>
  <meta property="og:description" content="Build predictive systems with security guardrails. Proof > promises."/>
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="https://connorjenkins-developer.github.io/evrt.ai/careers.html"/>
  <meta property="og:image" content="https://connorjenkins-developer.github.io/evrt.ai/assets/evrt-og.png"/>
  <meta name="twitter:card" content="summary_large_image"/>

  <style>
    :root{
      --cr-neon:#6ee7ff; --cr-accent:#63ffa5; --cr-amber:#ffd75a; --cr-danger:#ff4d6d;
      --cr-bg:#0a0e14; --cr-card:#0f141c; --cr-grid:rgba(255,255,255,.06); --cr-mute:#8fa2b7;
    }
    body{ background: radial-gradient(1400px 900px at 78% -260px,#142034 0,#0a0e14 65%); }

    /* Backdrop */
    .layers{ position:fixed; inset:0; z-index:0; pointer-events:none }
    #halo{ position:absolute; inset:0; opacity:.26 }
    .scan{ position:absolute; inset:0; background:linear-gradient(to bottom, rgba(255,255,255,.03) 1px, transparent 1px) 0 0/100% 3px; opacity:.26; mix-blend-mode:overlay }
    .matrix{ position:absolute; inset:auto 0 0 0; height:220px; opacity:.22; pointer-events:none; mask:linear-gradient(to top, rgba(0,0,0,.6), transparent)}

    /* Layout / UI */
    .section{ position:relative; z-index:1 }
    .eyebrow{ letter-spacing:.12em; text-transform:uppercase; color:var(--cr-mute) }
    .muted{ color:var(--cr-mute) }
    .row{ display:flex; align-items:center; justify-content:space-between; gap:10px }
    .row.wrap{ flex-wrap:wrap }
    .grid{ display:grid; gap:14px }
    .grid-2{ display:grid; gap:14px; grid-template-columns:1fr; }
    @media(min-width:980px){ .grid-2{ grid-template-columns:1.1fr 1fr } }
    .grid-3{ display:grid; gap:14px; grid-template-columns:1fr; }
    @media(min-width:980px){ .grid-3{ grid-template-columns:repeat(3,1fr) } }
    .grid-4{ display:grid; gap:14px; grid-template-columns:1fr; }
    @media(min-width:1100px){ .grid-4{ grid-template-columns:repeat(4,1fr) } }

    .card{ position:relative; border:1px solid var(--cr-grid); border-radius:16px; background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02)); padding:14px; overflow:hidden }
    .card:hover{ border-color:rgba(110,231,255,.45); box-shadow:0 14px 50px rgba(110,231,255,.10), 0 0 0 1px rgba(110,231,255,.25) inset }
    .badge{ display:inline-flex; align-items:center; gap:6px; padding:4px 10px; border:1px solid var(--cr-grid); border-radius:999px; font-size:12px }
    .tag{ font-size:11px; padding:2px 8px; border:1px solid var(--cr-grid); border-radius:999px; color:var(--cr-mute) }
    .tags{ display:flex; gap:6px; flex-wrap:wrap }
    .btn.neon{ background:linear-gradient(90deg,var(--cr-neon),var(--cr-accent)); color:#061019; border:0; font-weight:800 }
    .btn.ghost{ border:1px solid var(--cr-grid) }
    .control{ border:1px solid var(--cr-grid); border-radius:12px; background:#0f141c; padding:10px 12px; color:inherit; width:100% }
    .pill{ display:flex; gap:8px; flex-wrap:wrap }
    .pill button{ border:1px solid var(--cr-grid); border-radius:999px; padding:8px 12px; background:#0f141c; cursor:pointer }
    .pill button.active{ background:linear-gradient(90deg,var(--cr-neon),var(--cr-accent)); color:#061019; border:0; font-weight:800 }

    /* Job list */
    .role{ display:flex; flex-direction:column; gap:6px }
    .role .title{ font-weight:800; font-size:18px }
    .role .meta{ display:flex; gap:8px; flex-wrap:wrap }
    .role .meta .chip{ border:1px solid var(--cr-grid); border-radius:999px; padding:2px 8px; font-size:12px; color:var(--cr-mute) }
    .role .actions{ display:flex; gap:8px; flex-wrap:wrap }

    /* Modal */
    .sheet{ position:fixed; inset:0; background:rgba(5,8,13,.7); display:none; align-items:flex-end; justify-content:center; z-index:50 }
    .sheet .panel{ width:min(900px,96vw); max-height:86vh; overflow:auto; background:#07121b; border:1px solid rgba(110,231,255,.35); border-radius:16px 16px 0 0; padding:14px }
    @media(min-width:860px){ .sheet{ align-items:center } .sheet .panel{ border-radius:16px } }

    .mono{ font-family:ui-monospace, Menlo, Consolas, monospace; font-size:12px; color:#9fb3c8 }

    /* Timeline */
    .timeline{ display:flex; gap:10px; overflow:auto; padding-bottom:6px }
    .mile{ min-width:240px; border:1px solid var(--cr-grid); border-radius:12px; background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.015)); padding:10px }

    /* Sticky CTA */
    .sticky-cta{ position:sticky; bottom:12px; z-index:40; display:flex; justify-content:center }
    .sticky-cta .bar{ width:min(1080px,92vw); backdrop-filter:blur(8px); background:#07121b; border:1px solid rgba(110,231,255,.35); border-radius:14px; padding:10px; display:flex; gap:10px; align-items:center }
    .ping{ width:8px; height:8px; border-radius:50%; background:#63ffa5; box-shadow:0 0 0 6px rgba(99,255,165,.15) }

    .hint{ font-size:12px; color:var(--cr-mute) }
  </style>
</head>
<body>
  <!-- Backdrop -->
  <div class="layers">
    <canvas id="halo" aria-hidden="true"></canvas>
    <div class="scan" aria-hidden="true"></div>
    <canvas id="matrix" class="matrix" aria-hidden="true"></canvas>
  </div>

  <div data-include="partials/header.html"></div>

  <!-- HERO -->
  <section class="container hero section" style="margin-top:20px">
    <span class="eyebrow">Careers @ EVRT</span>
    <h1 class="gradient-text">Build systems that make<br/>the next move obvious.</h1>
    <p class="sub">We ship **proof-driven** outcomes: Social AI, Ad Studio, Ad Lab, Dashboards, and Guardrails. If you like predictive models, beautiful UX, and secure rails—this is your lab.</p>
    <div class="tags" style="margin-top:10px">
      <span class="tag">Remote-first</span><span class="tag">Timezone: America/Chicago</span><span class="tag">Proof > promises</span><span class="tag">Security by default</span>
    </div>
    <div class="row wrap" style="margin-top:10px">
      <a class="btn neon" href="#open-roles">See open roles</a>
      <a class="btn" href="#apply">Apply now</a>
      <a class="btn" href="press.html">Press kit</a>
    </div>
  </section>

  <!-- WHY / BENEFITS -->
  <section class="container section grid-3">
    <div class="card">
      <strong>Why EVRT</strong>
      <p class="muted">We turn ambiguity into **predictive clarity**: best-minute posting, ROAS simulators, bandit exploration, and dashboards with guardrails.</p>
    </div>
    <div class="card">
      <strong>How we work</strong>
      <p class="muted">Small senior teams. Ship in weeks. Measure lift. Publish readouts. Improve the engine with every engagement.</p>
    </div>
    <div class="card">
      <strong>Benefits</strong>
      <p class="muted">Competitive pay, remote setup, learning stipend, focus Fridays, flexible PTO, and real product ownership.</p>
    </div>
  </section>

  <!-- FILTERS + ROLES -->
  <section id="open-roles" class="container section">
    <div class="row">
      <h3 style="margin:0">Open Roles</h3>
      <div class="muted">Search + filter. Click a role for the full brief.</div>
    </div>

    <div class="card" style="margin-top:8px">
      <div class="grid" style="grid-template-columns:1.2fr .9fr .9fr .9fr">
        <input id="q" class="control" placeholder="Search keywords (e.g., React, bandits, Supabase)"/>
        <select id="team" class="control"><option value="">All teams</option><option>Engineering</option><option>Data Science</option><option>Design</option><option>Growth</option><option>Security</option></select>
        <select id="level" class="control"><option value="">All levels</option><option>Senior</option><option>Mid</option><option>Lead</option></select>
        <select id="loc" class="control"><option value="">All locations</option><option>Remote (US)</option><option>Remote (Global)</option><option>Chicago (Hybrid)</option></select>
      </div>
      <div class="row wrap" style="margin-top:10px">
        <div class="tags"><span class="badge" id="count">0 roles</span><span class="badge">Updated: <span id="updated"></span></span></div>
        <div class="pill">
          <button data-fast="hot" class="">🔥 Hot</button>
          <button data-fast="new" class="">🆕 New</button>
          <button data-fast="all" class="active">All</button>
        </div>
      </div>
    </div>

    <div id="roles" class="grid-3" style="margin-top:10px"></div>
    <p class="hint" id="empty" style="display:none">No roles match your filters. Try clearing the search or switching team.</p>
  </section>

  <!-- APPLICATION COMPOSER -->
  <section id="apply" class="container section grid-2">
    <div class="card">
      <div class="row"><h3 style="margin:0">Apply</h3><div class="muted">Compose once → email opens</div></div>
      <div class="grid" style="grid-template-columns:1fr 1fr; margin-top:8px">
        <div><label class="muted">Your name</label><input id="aName" class="control" placeholder="Jane Doe"/></div>
        <div><label class="muted">Email</label><input id="aEmail" class="control" placeholder="you@company.com"/></div>
      </div>
      <div class="grid" style="grid-template-columns:1fr 1fr; margin-top:8px">
        <div><label class="muted">LinkedIn</label><input id="aLinked" class="control" placeholder="https://linkedin.com/in/you"/></div>
        <div><label class="muted">Portfolio / GitHub</label><input id="aPort" class="control" placeholder="https://"/></div>
      </div>
      <div style="margin-top:8px">
        <label class="muted">Role</label>
        <select id="aRole" class="control"></select>
      </div>
      <div style="margin-top:8px">
        <label class="muted">Why EVRT?</label>
        <textarea id="aWhy" class="control" placeholder="Share a quick note on how you ship proof-driven outcomes…" style="min-height:120px"></textarea>
      </div>
      <div class="row wrap" style="margin-top:10px">
        <button id="aSend" class="btn neon">Send application (email)</button>
        <button id="aDownload" class="btn">Download application (.md)</button>
      </div>
      <p class="hint">Attachments (resume, work samples) can’t be auto-added; the email will open and you can attach them before sending.</p>
    </div>

    <!-- Hiring Process / Referrals -->
    <div class="card">
      <div class="row"><h3 style="margin:0">Hiring Process</h3><div class="muted">Fast, respectful, signal-rich</div></div>
      <div class="timeline" style="margin-top:8px">
        <div class="mile"><div class="badge">1</div><strong>Intro</strong><p class="muted">15-min call (America/Chicago). Problem space & fit.</p></div>
        <div class="mile"><div class="badge">2</div><strong>Technical</strong><p class="muted">Portfolio/code deep-dive or small, paid work sample.</p></div>
        <div class="mile"><div class="badge">3</div><strong>Collab</strong><p class="muted">Pair on a real EVRT challenge (no whiteboards).</p></div>
        <div class="mile"><div class="badge">4</div><strong>Offer</strong><p class="muted">Clear scope, growth path, and success metrics.</p></div>
      </div>

      <div class="card" style="margin-top:10px">
        <div class="row"><strong>Refer a Candidate</strong><span class="muted">We love great intros</span></div>
        <div class="grid" style="grid-template-columns:1fr 1fr; margin-top:8px">
          <input id="rName" class="control" placeholder="Candidate name"/>
          <input id="rEmail" class="control" placeholder="candidate@domain.com"/>
        </div>
        <input id="rWhy" class="control" style="margin-top:8px" placeholder="Why they’re a fit (1–2 lines)"/>
        <div class="row wrap" style="margin-top:8px">
          <button id="rSend" class="btn">Send referral email</button>
          <a class="btn ghost" href="press.html">Company one-pager</a>
        </div>
      </div>
    </div>
  </section>

  <!-- CULTURE / PRINCIPLES -->
  <section class="container section grid-4">
    <div class="card"><strong>Proof before scale</strong><p class="muted">We pilot quickly, measure real lift, and scale winners.</p></div>
    <div class="card"><strong>Guardrails over gut feel</strong><p class="muted">Security and safety are default settings, not afterthoughts.</p></div>
    <div class="card"><strong>Predict then decide</strong><p class="muted">We build predictors that make the next move obvious.</p></div>
    <div class="card"><strong>High-agency teams</strong><p class="muted">Senior builders who own outcomes end-to-end.</p></div>
  </section>

  <!-- Sticky CTA -->
  <div class="sticky-cta">
    <div class="bar">
      <span class="badge"><span class="ping"></span> We’re hiring</span>
      <div class="muted" style="flex:1">Help us ship systems that compound advantage.</div>
      <a class="btn neon" href="#open-roles">See roles</a>
      <a class="btn" href="#apply">Apply</a>
    </div>
  </div>

  <!-- Job Sheet (modal) -->
  <div id="sheet" class="sheet" role="dialog" aria-modal="true" aria-labelledby="sheetTitle">
    <div class="panel">
      <div class="row wrap">
        <div>
          <div class="eyebrow" id="sTeam"></div>
          <h3 id="sTitle" style="margin:0"></h3>
          <div class="tags" style="margin-top:4px">
            <span class="tag" id="sLoc"></span>
            <span class="tag" id="sLevel"></span>
            <span class="tag" id="sType"></span>
          </div>
        </div>
        <div class="row" style="gap:8px">
          <button id="sApply" class="btn neon">Apply</button>
          <button id="sShare" class="btn">Copy link</button>
          <button id="sClose" class="btn ghost">Close</button>
        </div>
      </div>
      <div class="grid-2" style="margin-top:10px">
        <div class="card" style="padding:12px">
          <strong>Overview</strong>
          <p class="muted" id="sDesc" style="margin-top:6px"></p>
          <strong>Responsibilities</strong>
          <ul class="muted" id="sResp" style="margin-top:6px"></ul>
          <strong>Requirements</strong>
          <ul class="muted" id="sReq" style="margin-top:6px"></ul>
        </div>
        <div class="card" style="padding:12px">
          <strong>Compensation</strong>
          <p class="muted" id="sComp"></p>
          <strong>Nice to have</strong>
          <ul class="muted" id="sNice"></ul>
          <div class="card" style="margin-top:8px">
            <div class="row"><strong>Signals we look for</strong><div class="muted">Examples</div></div>
            <ul class="muted" id="sSignals" style="margin-top:6px"></ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div data-include="partials/footer.html"></div>

  <script defer src="assets/app.js"></script>
  <script>
    /* ===== Backdrop FX: halo + matrix ===== */
    (function haloFX(){
      const c=document.getElementById('halo'), ctx=c.getContext('2d');
      function resize(){ c.width=innerWidth; c.height=innerHeight; } resize(); addEventListener('resize', resize);
      const orbs = Array.from({length:7}, ()=>({x:Math.random()*c.width, y:Math.random()*c.height*0.6, r: 90+Math.random()*160, dx:(Math.random()-.5)*0.45, dy:(Math.random()-.5)*0.45, hue: 180+Math.random()*90}));
      (function tick(){ ctx.clearRect(0,0,c.width,c.height);
        orbs.forEach(o=>{ o.x+=o.dx; o.y+=o.dy; if(o.x<-120||o.x>c.width+120) o.dx*=-1; if(o.y<-120||o.y>c.height*0.8) o.dy*=-1;
          const g=ctx.createRadialGradient(o.x,o.y,0,o.x,o.y,o.r);
          g.addColorStop(0,`hsla(${o.hue},100%,60%,.12)`); g.addColorStop(1,'transparent'); ctx.fillStyle=g; ctx.beginPath(); ctx.arc(o.x,o.y,o.r,0,6.283); ctx.fill(); });
        requestAnimationFrame(tick);
      })();
    })();
    (function matrixFX(){
      const c=document.createElement('canvas'); c.id='mx'; c.className='matrix'; document.querySelector('.layers').appendChild(c);
      const ctx=c.getContext('2d'); const chars='01●◼︎◻︎▮▯◆◇';
      function resize(){ c.width=innerWidth; c.height=c.clientHeight||220; } resize(); addEventListener('resize', resize);
      const cols = ()=> Math.floor(c.width/16); let y = Array(cols()).fill(0);
      function draw(){
        ctx.fillStyle='rgba(10,14,20,.2)'; ctx.fillRect(0,0,c.width,c.height);
        ctx.fillStyle='#6ee7ff';
        y.forEach((v,i)=>{ const txt=chars[Math.floor(Math.random()*chars.length)]; ctx.fillText(txt, i*16, v); y[i] = v>c.height+Math.random()*100 ? 0 : v+16; });
        requestAnimationFrame(draw);
      } draw();
    })();

    /* ===== Jobs Data ===== */
    const JOBS = [
      {
        id:'senior-fullstack-engineer',
        title:'Senior Full-Stack Engineer (TS/React, Supabase)',
        team:'Engineering', level:'Senior', type:'Full-time', loc:'Remote (US)', hot:true, posted:'2025-08-25',
        keywords:['TypeScript','React','Supabase','Postgres','Edge','Auth'],
        desc:'Own end-to-end features across Social AI, Ad Studio, and portal. You’ll build sleek UI, wire secure data paths, and ship measurable outcomes.',
        resp:[
          'Design & ship React features with beautiful, performant UX',
          'Model data with Postgres/RLS and wire Supabase edge functions',
          'Integrate predictors and telemetry safely behind guardrails',
          'Own quality: accessibility, performance, and reliability'
        ],
        req:[
          '5+ years building production web apps (React/TS)',
          'Fluent with Postgres, SQL, and auth',
          'Sharp product taste and practical security instincts'
        ],
        nice:['Charts (Recharts/D3)','Edge functions','CI/CD on GitHub Actions'],
        comp:'$150k–$190k base + benefits • US remote',
        signals:['Shipped apps at scale','Readable, tested code','Product sense over tickets']
      },
      {
        id:'data-scientist-mmm',
        title:'Data Scientist — Marketing Mix Modeling',
        team:'Data Science', level:'Senior', type:'Full-time', loc:'Remote (Global)', hot:true, posted:'2025-08-22',
        keywords:['MMM','Bayesian','Causal','Bandits','Forecast'],
        desc:'Build and validate response curves for Ad Studio. Partner with growth to translate models into decisions and simulators.',
        resp:[
          'Design MMM pipelines & priors; quantify channel lift',
          'Build ROAS simulators that non-DS folks love to use',
          'Evaluate lift with counterfactuals; communicate tradeoffs'
        ],
        req:[
          '4+ years in applied DS (MMM/causal preferred)',
          'Python/R, probabilistic programming familiarity',
          'Clarity in comms; pragmatic with imperfect data'
        ],
        nice:['PyMC/Stan','Media mix in multiple markets','Time-series anomalies'],
        comp:'$145k–$180k or regional equivalent',
        signals:['Model→decision loop','Clear uncertainty handling','Readable notebooks']
      },
      {
        id:'product-designer-ai-data',
        title:'Product Designer — AI/Data UX',
        team:'Design', level:'Senior', type:'Full-time', loc:'Remote (US or Global)', hot:false, new:true, posted:'2025-08-28',
        keywords:['Product Design','Design Systems','Data Viz','Haptics','Motion'],
        desc:'Own EVRT’s visual language. Make complex predictions feel obvious and safe. Craft motion, data viz, and empty states that convert.',
        resp:[
          'Design flows for Social AI, Ad Studio, and Lab',
          'Partner with eng on component library & motion',
          'Prototype micro-interactions; test and iterate fast'
        ],
        req:[
          'Portfolio with shipped product work',
          'Fluency in data viz and accessibility',
          'Systems thinker with taste'
        ],
        nice:['Lottie/Web animations','Chart libraries','Design tokens'],
        comp:'$120k–$160k base or regional equivalent',
        signals:['Decomposes complexity','Polished details','User empathy']
      },
      {
        id:'security-engineer-appsec',
        title:'Security Engineer — AppSec/Cloud',
        team:'Security', level:'Senior', type:'Full-time', loc:'Chicago (Hybrid)', hot:false, new:true, posted:'2025-08-20',
        keywords:['AppSec','Cloud','WAF','SIEM','RLS'],
        desc:'Harden guardrails. You’ll tune WAF rules, review RLS, build anomaly alerts, and keep our zero-trust posture crisp.',
        resp:[
          'Threat model subsystems; set and validate controls',
          'Review RLS policies, storage access, edge functions',
          'Wire SIEM hooks and anomaly alerting into dashboards'
        ],
        req:[
          '4+ years in AppSec or security engineering',
          'Practical SQL/RLS knowledge; cloud/WAF experience',
          'Clear risk communication to product & execs'
        ],
        nice:['Supabase/Postgres internals','mTLS','OWASP automation'],
        comp:'$150k–$185k base + benefits',
        signals:['Proportionate controls','Builder mindset','Incident calm']
      },
      {
        id:'client-strategy-lead',
        title:'Client Strategy Lead (Growth)',
        team:'Growth', level:'Lead', type:'Full-time', loc:'Remote (US)', hot:false, new:false, posted:'2025-08-15',
        keywords:['Strategy','D2C','B2B','Analytics','ROAS'],
        desc:'Own client outcomes. Frame hypotheses, run sprints, and publish proof. Bridge product, creative, and data.',
        resp:[
          'Scope goals & guardrails; turn them into experiments',
          'Run 3-week sprints and publish readouts',
          'Partner with design/DS/eng to turn wins into product'
        ],
        req:[
          '5+ years in growth/marketing with analytics depth',
          'Confident with funnels, MMM, SQL basics',
          'Strong writing and client leadership'
        ],
        nice:['Agency + in-house experience','Paid social search mix','B2B & D2C'],
        comp:'$130k–$170k base + performance',
        signals:['Story + data','Decisive cadence','Calm in ambiguity']
      }
    ];

    const TALENT_EMAIL = 'connorje3kins@gmail.com';

    /* ===== DOM helpers ===== */
    const el = s=>document.querySelector(s), els = s=>Array.from(document.querySelectorAll(s));
    const money = v => '$' + v;
    const fmtDate = iso => new Date(iso+'T00:00:00').toLocaleDateString(undefined,{month:'short', day:'numeric', year:'numeric'});

    /* ===== Render filters & roles ===== */
    function syncUpdated(){ el('#updated').textContent = new Date().toLocaleDateString(); }
    syncUpdated();

    function roleCard(job){
      const wrap=document.createElement('div'); wrap.className='card role';
      wrap.innerHTML = `
        <div class="title">${job.title}</div>
        <div class="meta">
          <span class="chip">${job.team}</span>
          <span class="chip">${job.level}</span>
          <span class="chip">${job.loc}</span>
          <span class="chip">${job.type}</span>
          ${job.hot?'<span class="chip">🔥 Hot</span>':''}
          ${job.new?'<span class="chip">🆕 New</span>':''}
        </div>
        <div class="muted">${job.desc}</div>
        <div class="actions">
          <button class="btn neon" data-open="${job.id}">View details</button>
          <button class="btn" data-apply="${job.id}">Apply</button>
          <button class="btn ghost" data-save="${job.id}">Save</button>
        </div>
      `;
      return wrap;
    }

    function renderRoleList(){
      const q = el('#q').value.trim().toLowerCase();
      const team = el('#team').value; const level = el('#level').value; const loc = el('#loc').value;
      const fast = document.querySelector('.pill button.active')?.dataset.fast || 'all';

      let rows = JOBS.filter(j=>{
        const t = (j.title + ' ' + j.desc + ' ' + j.keywords.join(' ') + ' ' + j.team + ' ' + j.level + ' ' + j.loc).toLowerCase();
        if(q && !t.includes(q)) return false;
        if(team && j.team!==team) return false;
        if(level && j.level!==level) return false;
        if(loc && j.loc!==loc) return false;
        if(fast==='hot' && !j.hot) return false;
        if(fast==='new' && !j.new) return false;
        return true;
      });

      const box = el('#roles'); box.innerHTML='';
      rows.forEach(j=> box.appendChild(roleCard(j)));
      el('#count').textContent = rows.length + ' role' + (rows.length===1?'':'s');
      el('#empty').style.display = rows.length ? 'none' : '';
      // wire buttons
      els('[data-open]').forEach(b=> b.onclick = ()=> openSheet(b.dataset.open));
      els('[data-apply]').forEach(b=> b.onclick = ()=> { el('#aRole').value = b.dataset.apply; location.hash='#apply'; el('#aName').focus(); });
      els('[data-save]').forEach(b=> b.onclick = ()=> saveRole(b.dataset.save));
    }

    ['#q','#team','#level','#loc'].forEach(id=> el(id).addEventListener('input', renderRoleList));
    els('.pill button').forEach(b=> b.onclick = ()=>{ els('.pill button').forEach(x=>x.classList.remove('active')); b.classList.add('active'); renderRoleList(); });

    function saveRole(id){
      const saved = JSON.parse(localStorage.getItem('evrt_saved_roles')||'[]');
      if(!saved.includes(id)) saved.push(id);
      localStorage.setItem('evrt_saved_roles', JSON.stringify(saved));
      alert('Saved. You can revisit this role later.');
    }

    /* ===== Sheet (job modal) ===== */
    function openSheet(id){
      const j = JOBS.find(x=>x.id===id); if(!j) return;
      el('#sTeam').textContent = j.team;
      el('#sTitle').textContent = j.title;
      el('#sLoc').textContent = j.loc; el('#sLevel').textContent = j.level; el('#sType').textContent = j.type;
      el('#sDesc').textContent = j.desc;
      el('#sResp').innerHTML = j.resp.map(x=>`<li>${x}</li>`).join('');
      el('#sReq').innerHTML  = j.req.map(x=>`<li>${x}</li>`).join('');
      el('#sNice').innerHTML = j.nice.map(x=>`<li>${x}</li>`).join('');
      el('#sSignals').innerHTML = (j.signals||[]).map(x=>`<li>${x}</li>`).join('');
      el('#sComp').textContent = j.comp;
      el('#sApply').onclick = ()=>{ el('#aRole').value = j.id; location.hash='#apply'; el('#aName').focus(); };
      el('#sShare').onclick = ()=>{
        const url = location.origin + location.pathname + '#job=' + j.id;
        navigator.clipboard.writeText(url).then(()=> alert('Link copied to clipboard.'));
      };
      el('#sheet').style.display='flex';
      document.body.style.overflow='hidden';
      history.replaceState({}, '', location.pathname + '#job=' + j.id);
    }
    el('#sClose').onclick = ()=> closeSheet();
    el('#sheet').addEventListener('click', (e)=>{ if(e.target.id==='sheet') closeSheet(); });
    function closeSheet(){
      el('#sheet').style.display='none'; document.body.style.overflow=''; 
      if(location.hash.startsWith('#job=')) history.replaceState({},'', location.pathname);
    }

    // Deep link to a job
    if(location.hash.startsWith('#job=')){ const id = location.hash.split('=')[1]; setTimeout(()=> openSheet(id), 400); }

    /* ===== Application composer ===== */
    function populateRoleSelect(){
      const s = el('#aRole'); s.innerHTML = JOBS.map(j=> `<option value="${j.id}">${j.title} — ${j.team}</option>`).join('');
    }
    populateRoleSelect();

    function appMarkdown(){
      const r = JOBS.find(x=>x.id===el('#aRole').value);
      return [
        `# EVRT Application — ${r?.title||''}`,
        ``,
        `**Name:** ${el('#aName').value.trim()}`,
        `**Email:** ${el('#aEmail').value.trim()}`,
        `**LinkedIn:** ${el('#aLinked').value.trim()}`,
        `**Portfolio/GitHub:** ${el('#aPort').value.trim()}`,
        ``,
        `## Why EVRT`,
        (el('#aWhy').value.trim() || '-'),
        ``,
        `> Generated via careers page • America/Chicago`
      ].join('\n');
    }
    function download(text, name, type){
      const blob=new Blob([text],{type}); const url=URL.createObjectURL(blob);
      const a=document.createElement('a'); a.href=url; a.download=name; a.click(); setTimeout(()=>URL.revokeObjectURL(url),4000);
    }

    el('#aDownload').onclick = ()=> download(appMarkdown(), 'evrt-application.md', 'text/markdown');

    el('#aSend').onclick = ()=>{
      const name = el('#aName').value.trim(); const email = el('#aEmail').value.trim();
      if(!name || !email){ alert('Name and email are required.'); return; }
      const job = JOBS.find(x=>x.id===el('#aRole').value);
      const subject = `Application — ${job?.title||'EVRT'} — ${name}`;
      const body = appMarkdown();
      const link = `mailto:${TALENT_EMAIL}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
      if(link.length < 1900){ location.href = link; }
      else { navigator.clipboard.writeText(body); alert('Your application was copied to clipboard; paste it into the email that opens.'); location.href='mailto:'+TALENT_EMAIL+'?subject='+encodeURIComponent(subject); }
    };

    /* ===== Referrals ===== */
    el('#rSend').onclick = ()=>{
      const n=el('#rName').value.trim(), e=el('#rEmail').value.trim(), why=el('#rWhy').value.trim();
      const subject = `Referral — ${n}`;
      const body = [
        `Referral for: ${n}`,
        `Email: ${e}`,
        ``,
        `Why they’re a fit:`,
        why || '-'
      ].join('\n');
      const link = `mailto:${TALENT_EMAIL}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
      location.href = link;
    };

    /* ===== JSON-LD (JobPosting) ===== */
    (function schema(){
      const jobs = JOBS.map(j=>({
        '@context':'https://schema.org',
        '@type':'JobPosting',
        title:j.title,
        datePosted:j.posted,
        employmentType:j.type.replace('-','-'),
        hiringOrganization:{'@type':'Organization','name':'EVRT','sameAs': location.origin + (location.pathname.includes('/evrt.ai/')? '/evrt.ai/' : '/')},
        jobLocationType:j.loc.includes('Remote')?'TELECOMMUTE':undefined,
        jobLocation: j.loc.includes('Remote') ? undefined : {'@type':'Place','address':{'@type':'PostalAddress','addressLocality':'Chicago','addressRegion':'IL','addressCountry':'US'}},
        description:j.desc + ' Responsibilities: ' + j.resp.join('; ') + ' Requirements: ' + j.req.join('; '),
        directApply:true,
        validThrough: new Date(new Date(j.posted).getTime() + 90*86400000).toISOString(),
        industry: j.team,
        identifier:{'@type':'PropertyValue','name':'EVRT','value':j.id},
        employmentUnit:'EVRT'
      }));
      const s=document.createElement('script'); s.type='application/ld+json'; s.textContent=JSON.stringify(jobs);
      document.head.appendChild(s);
    })();

    /* ===== Updated timestamp & initial render ===== */
    renderRoleList();

    /* ===== Keyboard ESC closes sheet ===== */
    addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeSheet(); });
  </script>
</body>
</html>
