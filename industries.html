<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>EVRT — Industries</title>
  <meta name="description" content="Sector-specific playbooks: eCom, SaaS, Healthcare, Finance, Education, Hospitality, Manufacturing, Nonprofit, GovTech. Heatmaps, radar, ROI ramps, and a plan builder."/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300..900&family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="assets/style.css"/>

  <style>
    :root{
      --ind-neon:#6ee7ff; --ind-accent:#63ffa5; --ind-amber:#ffd75a; --ind-danger:#ff4d6d;
      --ind-bg:#0a0e14; --ind-card:#0f141c; --ind-grid:rgba(255,255,255,.06); --ind-mute:#8fa2b7;
    }
    body{ background: radial-gradient(1400px 900px at 80% -260px,#142034 0,#0a0e14 65%); }

    /* Backdrop FX */
    .layers{ position:fixed; inset:0; z-index:0; pointer-events:none; }
    #mesh{ position:absolute; inset:0; opacity:.22 }
    .scan{ position:absolute; inset:0; background:linear-gradient(to bottom, rgba(255,255,255,.03) 1px, transparent 1px) 0 0/100% 3px; opacity:.26; mix-blend-mode:overlay }

    /* Layout */
    .section{ position:relative; z-index:1 }
    .eyebrow{ letter-spacing:.12em; text-transform:uppercase; color:var(--ind-mute) }
    .muted{ color:var(--ind-mute) }
    .grid-2{ display:grid; gap:16px; grid-template-columns:1fr; }
    .grid-3{ display:grid; gap:16px; grid-template-columns:1fr; }
    @media(min-width:1100px){ .grid-2{ grid-template-columns:1.2fr 1fr } .grid-3{ grid-template-columns:1fr 1fr 1fr } }

    /* Cards */
    .card-x{ background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02)); border:1px solid var(--ind-grid); border-radius:14px; padding:14px }
    .card-x:hover{ border-color:rgba(110,231,255,.45); box-shadow:0 12px 40px rgba(110,231,255,.08), 0 0 0 1px rgba(110,231,255,.25) inset }
    .badge{ display:inline-flex; align-items:center; gap:6px; padding:4px 10px; border:1px solid var(--ind-grid); border-radius:999px; font-size:12px }
    .btn.neon{ background:linear-gradient(90deg,var(--ind-neon),var(--ind-accent)); color:#061019; border:0; font-weight:800 }
    .btn.ghost{ border:1px solid var(--ind-grid) }

    /* Chips / controls */
    .chips{ display:flex; flex-wrap:wrap; gap:8px }
    .chip{ padding:6px 10px; border-radius:999px; border:1px solid var(--ind-grid); cursor:pointer; user-select:none }
    .chip.active{ background:linear-gradient(90deg,var(--ind-neon),var(--ind-accent)); color:#061019; border:0; font-weight:800 }
    .control{ border:1px solid var(--ind-grid); border-radius:12px; background:#0f141c; padding:10px 12px; color:inherit }

    /* Heatmap */
    .hm{ border:1px solid var(--ind-grid); border-radius:14px; overflow:hidden; background:#0f141c }
    .hm .hdr, .hm .row{ display:grid; grid-template-columns:160px repeat(7, 1fr); }
    .hm .hdr div{ padding:8px 10px; font-size:12px; color:#9fb3c8; border-bottom:1px solid rgba(255,255,255,.06); background:#0b0e13; position:sticky; top:0; z-index:1 }
    .hm .label{ padding:10px; font-weight:600; color:#9fb3c8; border-right:1px solid rgba(255,255,255,.06); background:#0b0e13 }
    .hm .cell{ position:relative; padding:10px; border-right:1px solid rgba(255,255,255,.06); border-bottom:1px solid rgba(255,255,255,.06); cursor:pointer; background:#0f141c }
    .hm .cell .pct{ position:absolute; bottom:6px; right:8px; font-size:11px; color:#c7d7e6 }
    .hm .cell .spark{ height:6px; border-radius:6px; background:linear-gradient(90deg,#63ffa5,#ffd75a,#ff4d6d); box-shadow:0 0 20px rgba(110,231,255,.06) inset; width:0% }
    .hm .cell:hover{ outline:2px solid rgba(110,231,255,.45); z-index:2 }

    /* Drawer */
    .drawer{ position:fixed; right:18px; bottom:18px; width:min(420px,92vw); z-index:40; display:none }
    .drawer .box{ background:#07121b; border:1px solid rgba(110,231,255,.35); border-radius:14px; padding:12px }
    .drawer .mini{ color:#9fb3c8; font-size:12px }

    /* Radar / ROI */
    canvas.chart{ width:100%; height:260px; border:1px solid var(--ind-grid); border-radius:12px; background:#0f141c; }
    .gauge{ height:12px; border-radius:10px; border:1px solid var(--ind-grid); background:#0f141c; overflow:hidden }
    .gauge>div{ height:100%; width:0%; background:linear-gradient(90deg,#63ffa5,#ffd75a,#ff4d6d); transition:width .4s }

    /* Case tiles */
    .cases{ display:grid; gap:14px; grid-template-columns:1fr; }
    @media(min-width:1050px){ .cases{ grid-template-columns:repeat(3,1fr) } }
    .case{ position:relative; border:1px solid var(--ind-grid); border-radius:14px; background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02)); padding:14px; overflow:hidden; }
    .case .orb{ position:absolute; inset:auto auto -12% -10%; width:160px; height:160px; background:radial-gradient(closest-side, rgba(110,231,255,.28), transparent 70%); filter:blur(12px) }

    /* Terminal */
    .terminal{ background:#05080d;border:1px solid rgba(110,231,255,.25); box-shadow:0 0 40px rgba(110,231,255,.08) inset, 0 12px 40px rgba(0,0,0,.35); border-radius:12px; overflow:hidden; color:#bfefff; font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
    .term-top{ display:flex; align-items:center; gap:8px; padding:8px 12px; background:#07121b; border-bottom:1px solid rgba(255,255,255,.06); }
    .dot{ width:10px; height:10px; border-radius:999px } .dot.r{ background:#ff5f56 } .dot.y{ background:#ffbd2e } .dot.g{ background:#27c93f }
    .term-body{ height:220px; overflow:auto; padding:12px }
    .term-line{ white-space:pre-wrap } .term-success{ color:#63ffa5 } .term-warn{ color:#ffd75a } .term-err{ color:#ff8299 }
    .term-caret{ display:inline-block; width:9px; height:1.05em; background:#bfefff; vertical-align:-2px; animation:blink 1s steps(1) infinite }
    @keyframes blink{ 50%{ opacity:0 } }

    /* Grid overlay */
    .grid-overlay{ position:relative }
    .grid-overlay::before{
      content:''; position:absolute; inset:0; pointer-events:none;
      background:
        linear-gradient(90deg, rgba(255,255,255,.04) 1px, transparent 1px) 0 0/ 40px 40px,
        linear-gradient(0deg, rgba(255,255,255,.04) 1px, transparent 1px) 0 0/ 40px 40px;
      mask: linear-gradient(to bottom, transparent, rgba(0,0,0,.3) 20%, rgba(0,0,0,.3) 80%, transparent);
      opacity:.22; border-radius:16px
    }

    /* Sticky CTA */
    .sticky-cta{ position:sticky; bottom:12px; z-index:40; display:flex; justify-content:center }
    .sticky-cta .bar{ width:min(1080px,92vw); backdrop-filter:blur(8px); background:#07121b; border:1px solid rgba(110,231,255,.35); border-radius:14px; padding:10px; display:flex; gap:10px; align-items:center }
    .ping{ width:8px; height:8px; border-radius:50%; background:#63ffa5; box-shadow:0 0 0 6px rgba(99,255,165,.15) }

    @media(max-width:920px){ .hm .hdr, .hm .row{ grid-template-columns:120px repeat(7,1fr); } }
  </style>
</head>
<body>
  <!-- Backdrop -->
  <div class="layers">
    <canvas id="mesh" aria-hidden="true"></canvas>
    <div class="scan" aria-hidden="true"></div>
  </div>

  <div data-include="partials/header.html"></div>

  <!-- HERO -->
  <section class="container hero section" style="margin-top:20px">
    <span class="eyebrow">EVRT Industries</span>
    <h1 class="gradient-text">Sector Playbooks.<br/>Choose a market. Bend its curve.</h1>
    <p class="sub">Pick an industry to see its **Opportunity Heatmap**, **Radar**, and a ready-to-run **3-week plan**. Press <strong>⌘/Ctrl + 1-9</strong> to jump.</p>
    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;align-items:center">
      <input id="q" class="control" placeholder="Search industries or levers…"/>
      <div id="chips" class="chips">
        <!-- chips injected -->
      </div>
      <a class="btn neon" href="consulting.html">Book consult</a>
    </div>
  </section>

  <!-- OVERVIEW GRID -->
  <section class="container section">
    <div class="grid-2">
      <div class="card-x grid-overlay">
        <div class="row" style="display:flex;justify-content:space-between;align-items:center">
          <h3 style="margin:0">Opportunity Heatmap</h3>
          <div class="muted" id="hmTitle">—</div>
        </div>
        <div class="hm" id="heatmap" style="margin-top:8px">
          <!-- header + rows injected -->
        </div>
        <div class="muted" style="margin-top:6px">Click any cell to open the playbook drawer. Colors = potential impact; bar = ease/velocity.</div>
      </div>

      <div class="card-x grid-overlay">
        <h3>Industry Radar & ROI Ramp</h3>
        <canvas id="radar" class="chart" width="560" height="220"></canvas>
        <canvas id="timeline" class="chart" width="560" height="220" style="margin-top:8px"></canvas>
        <div class="gauge" style="margin-top:8px"><div id="roiBar"></div></div>
        <div class="muted" style="margin-top:6px">Projected 3-week ROI potential: <strong id="roiTxt">—×</strong></div>
      </div>
    </div>
  </section>

  <!-- CASE TILES -->
  <section class="container section">
    <h3>Signals & Case Patterns</h3>
    <div class="cases" id="cases" style="margin-top:8px"></div>
  </section>

  <!-- CONFIG BUILDER -->
  <section class="container section">
    <div class="grid-2">
      <div class="card-x grid-overlay">
        <h3>Plan Builder</h3>
        <p class="muted">Choose your **goal**, **channels**, and **guardrails**. We’ll mint a tailored plan + shareable link.</p>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:8px">
          <div>
            <label class="muted">Primary goal</label>
            <select id="goal" class="control">
              <option value="roas">Increase ROAS</option>
              <option value="cpa">Reduce CPA</option>
              <option value="growth">Accelerate new MRR</option>
              <option value="retention">Lift retention</option>
            </select>
          </div>
          <div>
            <label class="muted">Guardrails</label>
            <select id="guard" class="control">
              <option value="std">Standard</option>
              <option value="strict">Strict (regulated)</option>
              <option value="aggr">Aggressive (rapid testing)</option>
            </select>
          </div>
        </div>
        <div style="margin-top:8px">
          <label class="muted">Channels</label>
          <div id="chans" class="chips" style="margin-top:6px"></div>
        </div>
        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px">
          <button id="build" class="btn neon">Build plan</button>
          <button id="copyLink" class="btn">Copy share link</button>
        </div>
      </div>

      <div class="terminal grid-overlay">
        <div class="term-top">
          <span class="dot r"></span><span class="dot y"></span><span class="dot g"></span>
          <strong style="margin-left:6px">/opt/evrt/industries</strong>
          <span class="muted" style="margin-left:auto">root@evrt:~$</span>
        </div>
        <div id="term" class="term-body"></div>
      </div>
    </div>
  </section>

  <!-- Drawer -->
  <div id="drawer" class="drawer">
    <div class="box card-x">
      <div class="row" style="display:flex;justify-content:space-between;align-items:center">
        <strong id="pbTitle">Playbook</strong>
        <div style="display:flex;gap:8px">
          <a href="consulting.html" class="btn neon">Run this with EVRT</a>
          <button id="closeDrawer" class="btn">Close</button>
        </div>
      </div>
      <p class="mini" id="pbMeta" style="margin-top:6px"></p>
      <ol id="pbSteps" class="muted" style="margin-top:6px"></ol>
    </div>
  </div>

  <!-- Sticky CTA -->
  <div class="sticky-cta">
    <div class="bar">
      <span class="badge"><span class="ping"></span> Sector playbooks ready</span>
      <div class="muted" style="flex:1">Pick your industry, click a cell, and ship the plan in 3 weeks.</div>
      <a class="btn neon" href="consulting.html">Book consult</a>
    </div>
  </div>

  <div data-include="partials/footer.html"></div>

  <script defer src="assets/app.js"></script>
  <script>
    /* ===== Mesh background ===== */
    (function meshFX(){
      const c=document.getElementById('mesh'), ctx=c.getContext('2d');
      function resize(){ c.width=innerWidth; c.height=innerHeight; }
      resize(); addEventListener('resize', resize);
      const pts=Array.from({length:80},()=>({x:Math.random()*c.width,y:Math.random()*c.height,vx:(Math.random()-.5)*0.6,vy:(Math.random()-.5)*0.6}));
      (function tick(){
        ctx.fillStyle='rgba(10,14,20,0.10)'; ctx.fillRect(0,0,c.width,c.height);
        // points
        pts.forEach(p=>{
          p.x+=p.vx; p.y+=p.vy;
          if(p.x<0||p.x>c.width) p.vx*=-1;
          if(p.y<0||p.y>c.height) p.vy*=-1;
          ctx.fillStyle='#6ee7ff'; ctx.globalAlpha=.35; ctx.beginPath(); ctx.arc(p.x,p.y,1.6,0,6.283); ctx.fill(); ctx.globalAlpha=1;
        });
        // lines
        for(let i=0;i<pts.length;i++){
          for(let j=i+1;j<pts.length;j++){
            const a=pts[i], b=pts[j]; const dx=a.x-b.x, dy=a.y-b.y; const d=Math.hypot(dx,dy);
            if(d<140){ ctx.strokeStyle='rgba(110,231,255,'+(1-d/140)*.12+')'; ctx.beginPath(); ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y); ctx.stroke(); }
          }
        }
        requestAnimationFrame(tick);
      })();
    })();

    /* ===== Data ===== */
    const SECTORS = [
      {id:'ecom',  name:'eCommerce',        color:'#6ee7ff'},
      {id:'saas',  name:'SaaS',             color:'#63ffa5'},
      {id:'hlth',  name:'Healthcare',       color:'#ffd75a'},
      {id:'fin',   name:'Finance/Fintech',  color:'#ff4d6d'},
      {id:'edu',   name:'Education',        color:'#8ab6ff'},
      {id:'hosp',  name:'Hospitality',      color:'#caffbf'},
      {id:'mfg',   name:'Manufacturing',    color:'#ffe29a'},
      {id:'np',    name:'Nonprofit',        color:'#fbcfe8'},
      {id:'gov',   name:'GovTech',          color:'#e9d5ff'},
    ];
    const CHANNELS = ['Meta','Google','TikTok','Email/SMS','SEO','Affiliate','CTV/Display','LinkedIn'];
    const LEVERS   = ['Awareness','Acquisition','Activation','Revenue','Retention','Referral'];

    // Seeded presets per sector: impact (0..100) and velocity (ease) (0..100)
    function seeded(seed){ let x=seed; return ()=> (x = Math.sin(x) * 10000) - Math.floor(x); }
    const S = {}; // sector -> matrix[lever][channel] = {impact, velocity, pbTitle, steps[]}
    SECTORS.forEach((s,idx)=>{
      const r=seeded(1.7+idx);
      const M = LEVERS.map((L,li)=> CHANNELS.map((C,ci)=>{
        const impact = Math.max(12, Math.min(98, Math.round( 60 + (r()-0.5)*35 + (li-2)*6 + (ci%3===0?8:0) )));
        const velocity = Math.max(8, Math.min(96, Math.round( 55 + (r()-0.5)*40 + (ci-3)*4 )));
        return {
          impact, velocity,
          pbTitle: `${s.name}: ${L} × ${C}`,
          steps: [
            `Instrument baseline for ${C} → track ${L} KPIs`,
            `Draft experiments (A/B or bandit) targeting ${L}`,
            `Spin Social AI or Ad Studio assets tailored to ${C}`,
            `Launch, monitor anomalies, reallocate budget`,
            `Report uplift vs control; lock in winner`
          ]
        };
      }));
      S[s.id]=M;
    });

    /* ===== State ===== */
    const state = {
      sector: 'ecom',
      q: '',
      goal: 'roas',
      guard: 'std',
      chans: new Set(['Meta','Google','TikTok'])
    };

    /* ===== Helpers ===== */
    const el = sel => document.querySelector(sel);
    const els = sel => Array.from(document.querySelectorAll(sel));
    function clamp(a,b,c){ return Math.max(b, Math.min(c, a)); }

    /* ===== Chips (sectors) ===== */
    function buildChips(){
      const box = el('#chips'); box.innerHTML='';
      SECTORS.forEach((s,i)=>{
        const c=document.createElement('span'); c.className='chip'; c.dataset.id=s.id; c.textContent = `${i+1}. ${s.name}`;
        if(s.id===state.sector) c.classList.add('active');
        c.onclick = ()=>{ state.sector=s.id; updateAll(); };
        box.appendChild(c);
      });
    }

    /* ===== Heatmap ===== */
    function buildHeatmap(){
      const wrap = el('#heatmap'); wrap.innerHTML='';
      const hdr = document.createElement('div'); hdr.className='hdr';
      hdr.innerHTML = `<div></div>` + CHANNELS.map(c=>`<div>${c}</div>`).join('');
      wrap.appendChild(hdr);
      const data = S[state.sector];
      LEVERS.forEach((L,ri)=>{
        const row = document.createElement('div'); row.className='row';
        row.innerHTML = `<div class="label">${L}</div>` + CHANNELS.map((C,ci)=>{
          const cell = data[ri][ci];
          const tone = `linear-gradient(180deg, rgba(110,231,255,${cell.impact/500}), rgba(99,255,165,${cell.velocity/600}))`;
          return `<div class="cell" data-ri="${ri}" data-ci="${ci}" style="background:${tone}">
                    <div class="spark" style="width:${cell.velocity}%"></div>
                    <div class="pct">${cell.impact}%</div>
                  </div>`;
        }).join('');
        wrap.appendChild(row);
      });
      // click handlers
      wrap.querySelectorAll('.cell').forEach(c=>{
        c.onclick = ()=>{
          const ri=+c.dataset.ri, ci=+c.dataset.ci, cell=S[state.sector][ri][ci];
          openDrawer(cell.pbTitle, `${LEVERS[ri]} • ${CHANNELS[ci]} • Impact ${cell.impact}% • Velocity ${cell.velocity}%`, cell.steps);
        };
      });
      el('#hmTitle').textContent = SECTORS.find(s=>s.id===state.sector).name;
    }

    /* ===== Drawer ===== */
    function openDrawer(title, meta, steps){
      el('#pbTitle').textContent=title;
      el('#pbMeta').textContent=meta;
      const list = el('#pbSteps'); list.innerHTML=''; steps.forEach(s=>{ const li=document.createElement('li'); li.textContent=s; list.appendChild(li); });
      el('#drawer').style.display='block';
    }
    el('#closeDrawer').onclick = ()=> el('#drawer').style.display='none';

    /* ===== Radar & Timeline ===== */
    const radar = el('#radar'), rctx = radar.getContext('2d');
    function drawRadar(){
      const W=radar.width=radar.clientWidth, H=radar.height=radar.clientHeight, cx=W/2, cy=H/2, R=Math.min(W,H)*0.36;
      rctx.clearRect(0,0,W,H); rctx.fillStyle='#0f141c'; rctx.fillRect(0,0,W,H);
      const axes=['Awareness','Acquisition','Activation','Revenue','Retention','Referral'];
      // grid
      rctx.strokeStyle='rgba(255,255,255,.08)'; for(let g=1; g<=4; g++){ rctx.beginPath(); for(let i=0;i<axes.length;i++){ const a=(i/axes.length)*Math.PI*2 - Math.PI/2; const x=cx+Math.cos(a)*R*g/4, y=cy+Math.sin(a)*R*g/4; if(i===0) rctx.moveTo(x,y); else rctx.lineTo(x,y);} rctx.closePath(); rctx.stroke(); }
      // axes
      rctx.fillStyle='#9fb3c8'; rctx.font='12px Inter,system-ui'; rctx.textAlign='center';
      for(let i=0;i<axes.length;i++){ const a=(i/axes.length)*Math.PI*2 - Math.PI/2; rctx.beginPath(); rctx.moveTo(cx,cy); rctx.lineTo(cx+Math.cos(a)*R, cy+Math.sin(a)*R); rctx.stroke(); rctx.fillText(axes[i], cx+Math.cos(a)*(R+12), cy+Math.sin(a)*(R+12)); }
      // values: average impact per lever
      const data = S[state.sector];
      const vals = LEVERS.map((L,ri)=> Math.round( data[ri].reduce((s,c)=> s+c.impact,0) / data[ri].length ) / 100 );
      const color = SECTORS.find(s=>s.id===state.sector).color;
      rctx.beginPath(); vals.forEach((v,i)=>{ const a=(i/axes.length)*Math.PI*2 - Math.PI/2; const x=cx+Math.cos(a)*R*v, y=cy+Math.sin(a)*R*v; if(i===0) rctx.moveTo(x,y); else rctx.lineTo(x,y); });
      rctx.closePath(); rctx.fillStyle = color+'33'; rctx.strokeStyle=color; rctx.lineWidth=2; rctx.fill(); rctx.stroke();

      // ROI reading
      const roi = clamp( (vals.reduce((a,b)=>a+b,0)/vals.length) * 4.2, 1.1, 6.5 );
      el('#roiTxt').textContent = roi.toFixed(1)+'×';
      el('#roiBar').style.width = Math.min(100, roi*22) + '%';
    }

    const tl = el('#timeline'), tctx = tl.getContext('2d');
    function drawTimeline(){
      const W=tl.width=tl.clientWidth, H=tl.height=tl.clientHeight;
      tctx.clearRect(0,0,W,H); tctx.fillStyle='#0f141c'; tctx.fillRect(0,0,W,H);
      tctx.strokeStyle='rgba(255,255,255,.08)'; for(let i=0;i<4;i++){ tctx.beginPath(); tctx.moveTo(40, 20+i*(H-60)/3); tctx.lineTo(W-20, 20+i*(H-60)/3); tctx.stroke(); }
      // weeks 1..3 milestones
      const steps=[['Week 1','Blueprint & Setup'],['Week 2','Go Live + Bandit'],['Week 3','Optimize + Prove']];
      const bars=[0.32,0.60,0.88].map((p,i)=>({y:40+i*60,w:(W-80)*p}));
      const color = SECTORS.find(s=>s.id===state.sector).color;
      bars.forEach((b,i)=>{ tctx.fillStyle=color; tctx.shadowBlur=10; tctx.shadowColor=color+'66'; tctx.fillRect(60,b.y,b.w,24); tctx.shadowBlur=0;
                            tctx.fillStyle='#9fb3c8'; tctx.font='12px Inter,system-ui'; tctx.fillText(steps[i][0]+' — '+steps[i][1], 60, b.y-6); });
    }

    /* ===== Case tiles ===== */
    function buildCases(){
      const box = el('#cases'); box.innerHTML='';
      const sName = SECTORS.find(s=>s.id===state.sector).name;
      const examples = [
        ['Predictive Launch', 'Simulate mixes → ship winners in 48h', '+2.4× speed'],
        ['Creative Bandits', 'Rotate 3-5 concepts to learn fast', '−21% CPA'],
        ['Guardrails', 'Harden data + anomaly alerts', '0 critical incidents']
      ];
      examples.forEach(ex=>{
        const card=document.createElement('div'); card.className='case';
        card.innerHTML = `
          <div class="orb"></div>
          <div class="badge">${sName}</div>
          <h4 style="margin:6px 0">${ex[0]}</h4>
          <p class="muted">${ex[1]}</p>
          <div class="badge">${ex[2]}</div>
          <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap">
            <a class="btn neon" href="consulting.html">Book this</a>
            <button class="btn" data-see="${ex[0]}">See steps</button>
          </div>
        `;
        box.appendChild(card);
      });
      box.querySelectorAll('[data-see]').forEach(b=> b.onclick=()=>{
        openDrawer(`${b.dataset.see} — ${sName}`, '5-step quickstart', [
          'Define KPIs & constraints',
          'Draft creative/ad sets (Social AI / Ad Studio)',
          'Predict mix, set guardrails',
          'Launch with bandit rotation',
          'Daily telemetry → lock winner'
        ]);
      });
    }

    /* ===== Plan Builder ===== */
    const CHAN_SET = ['Meta','Google','TikTok','LinkedIn','Email/SMS','SEO','Affiliate','CTV/Display'];
    function buildChannels(){
      const box=el('#chans'); box.innerHTML='';
      CHAN_SET.forEach(c=>{
        const chip=document.createElement('span'); chip.className='chip'; chip.textContent=c;
        if(state.chans.has(c)) chip.classList.add('active');
        chip.onclick=()=>{ state.chans.has(c) ? state.chans.delete(c) : state.chans.add(c); buildChannels(); };
        box.appendChild(chip);
      });
    }
    el('#goal').onchange = e=> state.goal = e.target.value;
    el('#guard').onchange = e=> state.guard = e.target.value;

    function buildPlan(){
      const sName = SECTORS.find(s=>s.id===state.sector).name;
      const channels=[...state.chans];
      const plan = [
        `Sector: ${sName}`,
        `Goal: ${state.goal.toUpperCase()}`,
        `Guardrails: ${state.guard}`,
        `Channels: ${channels.join(', ') || '—'}`
      ].join(' • ');
      T.typeCmd('evrt plan build', ()=> T.println('✓ '+plan, 'term-success'));
      // also write a few recommended actions
      const actions = [
        'Hook telemetry → define north-star',
        'Predictive budget mix (Ad Studio)',
        'Creative drafting (Social AI)',
        'Bandit rotation + anomaly watch',
        'Report uplift vs control'
      ];
      actions.forEach(a=> T.println('> '+a));
    }
    el('#build').onclick = buildPlan;

    function copyShare(){
      const params = new URLSearchParams({
        s: state.sector, g: state.goal, gr: state.guard, ch: [...state.chans].join(','),
      });
      const url = location.origin + location.pathname + '?' + params.toString();
      navigator.clipboard.writeText(url);
      T.println('✓ share link copied', 'term-success');
      alert('Link copied to clipboard!');
    }
    el('#copyLink').onclick = copyShare;

    /* ===== Terminal helper ===== */
    function makeTerm(elid){
      const term = document.getElementById(elid);
      function println(s, cls=''){ const d=document.createElement('div'); d.className='term-line '+cls; d.textContent=s; term.appendChild(d); term.scrollTop=term.scrollHeight; }
      function typeCmd(cmd, cb){
        const row=document.createElement('div'); row.className='term-line'; term.appendChild(row); let i=0;
        const iv=setInterval(()=>{ row.textContent='$ '+cmd.slice(0,++i)+(i%2?'_':''); term.scrollTop=term.scrollHeight;
          if(i>=cmd.length){ clearInterval(iv); row.innerHTML='$ '+cmd+' <span class="term-caret"></span>'; cb&&cb(); } }, 16);
      }
      return { println, typeCmd };
    }
    const T = makeTerm('term');

    /* ===== Search ===== */
    el('#q').addEventListener('input', (e)=>{
      state.q = e.target.value.toLowerCase();
      // naive filter: if search matches sector or channel/lever keywords, jump to best sector
      const hit = SECTORS.find(s=> s.name.toLowerCase().includes(state.q));
      if(hit){ state.sector=hit.id; updateAll(); }
    });

    /* ===== Keyboard: ⌘/Ctrl + 1..9 ===== */
    addEventListener('keydown', (e)=>{
      const k = e.key;
      if((e.metaKey||e.ctrlKey) && /^[1-9]$/.test(k)){
        const idx = +k - 1; if(SECTORS[idx]){ state.sector=SECTORS[idx].id; updateAll(); }
      }
    });

    /* ===== Update all ===== */
    function updateAll(){
      els('#chips .chip').forEach(ch=> ch.classList.toggle('active', ch.dataset.id===state.sector));
      buildHeatmap(); drawRadar(); drawTimeline(); buildCases();
      const name = SECTORS.find(s=>s.id===state.sector).name;
      T.typeCmd('evrt sector set "'+name+'"', ()=> T.println('✓ loaded '+name+' playbooks', 'term-success'));
    }

    /* ===== Init from URL params if present ===== */
    function initFromQuery(){
      const p = new URLSearchParams(location.search);
      if(p.get('s') && SECTORS.some(s=>s.id===p.get('s'))) state.sector = p.get('s');
      if(p.get('g')) state.goal = p.get('g');
      if(p.get('gr')) state.guard = p.get('gr');
      if(p.get('ch')){ state.chans = new Set( p.get('ch').split(',').filter(Boolean) ); }
      el('#goal').value = state.goal; el('#guard').value = state.guard;
    }

    /* ===== Boot ===== */
    function boot(){
      buildChips(); buildHeatmap(); drawRadar(); drawTimeline();
      buildCases(); buildChannels(); updateAll();
      // terminal welcome
      T.typeCmd('evrt industries init', ()=> T.println('✓ ready • click any heatmap cell to open a playbook', 'term-success'));
      addEventListener('resize', ()=>{ drawRadar(); drawTimeline(); });
    }
    initFromQuery(); boot();

  </script>
</body>
</html>
